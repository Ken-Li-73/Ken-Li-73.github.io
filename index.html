<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.4.0"><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Microsoft+YaHei:300,300italic,400,400italic,700,700italic%7Cconsolas:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script><script class="next-config" data-name="main" type="application/json">{"hostname":"www.mykebaby.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.8.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":16},"copycode":true,"bookmark":{"enable":true,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":true,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"manual","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script><meta name="description" content="Later Is Never"><meta property="og:type" content="website"><meta property="og:title" content="半日浮生"><meta property="og:url" content="https://www.mykebaby.com/index.html"><meta property="og:site_name" content="半日浮生"><meta property="og:description" content="Later Is Never"><meta property="og:locale" content="zh_CN"><meta property="article:author" content="小懒虫"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.mykebaby.com/"><script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"zh-CN","comments":"","permalink":"","path":"index.html","title":""}</script><script class="next-config" data-name="calendar" type="application/json">""</script><title>半日浮生</title><noscript><link rel="stylesheet" href="/css/noscript.css"></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">半日浮生</h1><i class="logo-line"></i></a></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-resources"><a href="/resources/" rel="section"><i class="fa fa-download fa-fw"></i>资源</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close" role="button"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle" role="button"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-overview-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><div class="sidebar-panel-container"><div class="post-toc-wrap sidebar-panel"></div><div class="site-overview-wrap sidebar-panel"><div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="小懒虫" src="/uploads/avatar.jpg"><p class="site-author-name" itemprop="name">小懒虫</p><div class="site-description" itemprop="description">Later Is Never</div></div><div class="site-state-wrap site-overview-item animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">29</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">9</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">27</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author site-overview-item animated"><span class="links-of-author-item"><a href="https://github.com/ken-li-73" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;ken-li-73" rel="noopener external nofollow noreferrer" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class="links-of-author-item"><a href="mailto:wind.lklkk@gmail.com" title="E-Mail → mailto:wind.lklkk@gmail.com" rel="noopener external nofollow noreferrer" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a></span></div><div class="cc-license site-overview-item animated" itemprop="license"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" class="cc-opacity" rel="noopener external nofollow noreferrer" target="_blank"><img src="https://cdn.jsdelivr.net/npm/@creativecommons/vocabulary@2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js"></script><meting-js server="tencent" type="playlist" id="8239047461" mini="false" fixed="false" list-folded="true" autoplay volume="0.4" theme="#FADFA3" order="list" loop preload="auto" lrc-type="1" mutex="true"></meting-js></div></div></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top" role="button" aria-label="返回顶部"><i class="fa fa-arrow-up"></i> <span>0%</span></div><a role="button" class="book-mark-link book-mark-link-fixed"></a><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner index posts-expand"><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/ecc65d01/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/ecc65d01/" class="post-title-link" itemprop="url">算法：匈牙利算法</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-14 11:56:51 / 修改时间：12:11:57" itemprop="dateCreated datePublished" datetime="2022-03-14T11:56:51+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>匈牙利算法思想：<strong>先到先得，能让则让</strong>。</p><div class="post-button"><a class="btn" href="/posts/ecc65d01/#more" rel="contents">阅读全文 &raquo;</a></div></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/6577bcb2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/6577bcb2/" class="post-title-link" itemprop="url">MySQL:分支结构</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:34:44" itemprop="dateCreated datePublished" datetime="2022-03-12T15:34:44+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h3 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h3><p>顺序结构:程序从上往下依次执行<br>分支结构:程序从两条或多条路径中选择一条去执行<br>循环结构:程序在满足一定条件的基础上，重复执行一段代码</p><h3 id="1-分支结构"><a href="#1-分支结构" class="headerlink" title="1.分支结构"></a>1.分支结构</h3><h4 id="1-1-if-函数"><a href="#1-1-if-函数" class="headerlink" title="1.1 if 函数"></a>1.1 if 函数</h4><p>功能:实现简单的双分支语法:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">if(表达式<span class="number">1</span>,表达式<span class="number">2</span>,表达式<span class="number">3</span>)</span><br></pre></td></tr></table></figure><p>执行顺序:<br>如果表达式1成立，则if函数返回表达式2的值，否则返回表达式3的值<br>应用:任何地方</p><h4 id="1-2-case-结构"><a href="#1-2-case-结构" class="headerlink" title="1.2.case 结构"></a>1.2.case 结构</h4><p>情况1:类似于java中的switch语句，一般用于实现的等值判断</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> 变量<span class="operator">|</span>表达式<span class="operator">|</span>字段</span><br><span class="line"><span class="keyword">when</span> 要判断的值 <span class="keyword">then</span> 返回的值<span class="number">1</span>或语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">when</span> 要判断的值 <span class="keyword">then</span> 返回的值<span class="number">2</span>或语句<span class="number">2</span>;</span><br><span class="line">······</span><br><span class="line"><span class="keyword">else</span> 要判断的值n或语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span>;</span><br></pre></td></tr></table></figure><p>情况2:类似与java中的多重if语句,一般用于实现区间判断</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">case</span> </span><br><span class="line"><span class="keyword">when</span> 要判断的条件 <span class="keyword">then</span> 返回的值<span class="number">1</span>或语句<span class="number">1</span>;</span><br><span class="line"><span class="keyword">when</span> 要判断的条件 <span class="keyword">then</span> 返回的值<span class="number">2</span>或语句<span class="number">2</span>;</span><br><span class="line">······</span><br><span class="line"><span class="keyword">else</span> 要判断的值n;</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">case</span>;</span><br></pre></td></tr></table></figure><p>特点:</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>可以作为表达式，嵌套在其他语句中使用，可以放在任何地方， <span class="keyword">BEGIN</span> <span class="keyword">END</span>中或 <span class="keyword">BEGIN</span> <span class="keyword">END</span>的外面可以作为独立的语句去使用，只能放在 <span class="keyword">BEGIN</span> <span class="keyword">END</span>中.</span><br><span class="line"><span class="number">2.</span>如果 <span class="keyword">WHEN</span> 中的值满足或条件成立，则执行对应的 <span class="keyword">THEN</span> 后面的语句，并且结束 <span class="keyword">CASE</span> 如果都不满足，则执行 <span class="keyword">ELSE</span> 中的语句或值</span><br><span class="line"><span class="number">3.</span><span class="keyword">ELSE</span> 可以省略，如果 <span class="keyword">ELSE</span> 省略了，并且所有 <span class="keyword">WHEN</span> 条件都不满足，则返回 <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure><h4 id="1-3-if-结构"><a href="#1-3-if-结构" class="headerlink" title="1.3 if 结构"></a>1.3 if 结构</h4><p>功能：实现多重分支</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if 条件<span class="number">1</span> <span class="keyword">then</span> 语句<span class="number">1</span>;</span><br><span class="line">elseif 条件<span class="number">1</span> <span class="keyword">then</span> 语句<span class="number">1</span>;</span><br><span class="line">elseif 条件<span class="number">1</span> <span class="keyword">then</span> 语句<span class="number">1</span>;</span><br><span class="line">······</span><br><span class="line"><span class="keyword">else</span> 语句n;</span><br><span class="line"><span class="keyword">end</span> if;</span><br></pre></td></tr></table></figure><p>应用在begin end中</p><h3 id="2-循环控制"><a href="#2-循环控制" class="headerlink" title="2.循环控制"></a>2.循环控制</h3><p>循环有三个：while ,loop, repeat</p><p>iterate类似于continue，继续，结束本次循环，继续下一次</p><p>leave类似于break，跳出,结束当前所在的循环</p><h4 id="2-1-while-语法"><a href="#2-1-while-语法" class="headerlink" title="2.1 while 语法"></a>2.1 while 语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[标签:] while 循环条件 do</span><br><span class="line">	循环体;</span><br><span class="line"><span class="keyword">end</span> while [标签];</span><br></pre></td></tr></table></figure><h4 id="2-2-loop-语法"><a href="#2-2-loop-语法" class="headerlink" title="2.2 loop 语法"></a>2.2 loop 语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[标签:] loop </span><br><span class="line">	循环体;</span><br><span class="line"><span class="keyword">end</span> loop [标签];</span><br><span class="line"><span class="comment">-- 可以用来模拟简单的死循环</span></span><br></pre></td></tr></table></figure><h4 id="2-3-repeat-语法"><a href="#2-3-repeat-语法" class="headerlink" title="2.3 repeat 语法"></a>2.3 repeat 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[标签:] repeat</span><br><span class="line">	循环体;</span><br><span class="line">until 结束循环条件</span><br><span class="line">end repeat [标签];</span><br></pre></td></tr></table></figure><h3 id="3-举例"><a href="#3-举例" class="headerlink" title="3. 举例"></a>3. 举例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> ddd2 ( <span class="keyword">IN</span> number <span class="type">INT</span> ) <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span></span><br><span class="line">		i <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">DECLARE</span></span><br><span class="line">		max_insert_num <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">5</span>;</span><br><span class="line">	a :</span><br><span class="line">	WHILE</span><br><span class="line">			number <span class="operator">&gt;=</span> i DO</span><br><span class="line">			<span class="keyword">SET</span> i <span class="operator">=</span> i <span class="operator">+</span> <span class="number">1</span>;</span><br><span class="line">		<span class="comment">-- 判断是否是偶数</span></span><br><span class="line">		IF</span><br><span class="line">			i <span class="operator">%</span> <span class="number">2</span> <span class="operator">=</span> <span class="number">1</span> <span class="keyword">THEN</span></span><br><span class="line">				ITERATE a;</span><br><span class="line">		<span class="keyword">END</span> IF;</span><br><span class="line">		<span class="comment">-- 插入数据</span></span><br><span class="line">		<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin ( username, `password` )</span><br><span class="line">		<span class="keyword">VALUES</span></span><br><span class="line">			( concat( <span class="string">&#x27;LI&#x27;</span>, i ), <span class="string">&#x27;22222&#x27;</span> );</span><br><span class="line">		</span><br><span class="line">	<span class="keyword">END</span> WHILE a;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span> $ <span class="keyword">CALL</span> ddd2 (</span><br><span class="line"><span class="number">10</span>)</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/60511917/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/60511917/" class="post-title-link" itemprop="url">MySQL:存储过程和函数</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:34:02" itemprop="dateCreated datePublished" datetime="2022-03-12T15:34:02+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 12:16:36" itemprop="dateModified" datetime="2022-03-14T12:16:36+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><p>存储过程和函数:类似于java中的方法好处:<br>1、提高代码的重用性<br>2、简化操作</p><h2 id="1-存储过程"><a href="#1-存储过程" class="headerlink" title="1.存储过程"></a>1.存储过程</h2><p>含义:一组预先编译好的sql语句的集合，理解成批处理语句<br>1、提高代码的重用性<br>2、简化操作<br>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率</p><h3 id="1-1-创建和调用语法"><a href="#1-1-创建和调用语法" class="headerlink" title="1.1 创建和调用语法"></a>1.1 创建和调用语法</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建语法</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">procedure</span> 存储过程名(参数列表)</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	存储过程体（一组合法的<span class="keyword">SQL</span>语句）</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 调用语法</span></span><br><span class="line"><span class="keyword">call</span> 存储过程名(实参列表)</span><br></pre></td></tr></table></figure><h4 id="1-1-1-注意"><a href="#1-1-1-注意" class="headerlink" title="1.1.1 注意"></a>1.1.1 注意</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>参数列表包含三部分：参数模式、参数名、参数类型</span><br><span class="line">    例子：<span class="keyword">IN</span> stuname <span class="type">varchar</span>(<span class="number">20</span>)</span><br><span class="line">    参数模式有：</span><br><span class="line">    <span class="keyword">IN</span>:该参数可以作O为输入，也就是该参数需要调用方传入值</span><br><span class="line">    <span class="keyword">OUT</span>:该参数可以作为输出，也就是该参数可以作为返回值</span><br><span class="line">	<span class="keyword">INOUT</span>:该参数既可以作为输入又可以作为输出，也就是该参数既需要传入值，又可以返回值</span><br><span class="line"><span class="number">2.</span>如果存储过程体仅仅只有一句话，<span class="keyword">BEGIN</span> <span class="keyword">END</span>可以省略</span><br><span class="line"><span class="number">3.</span>存储过程体中的每条<span class="keyword">SQL</span>语句的结尾要求必须加分号。</span><br><span class="line"><span class="number">4.</span>存储过程的结尾可以使用DELIMITER 重新设置</span><br><span class="line"><span class="comment">-- 语法:</span></span><br><span class="line">DELIMITER 结束标记</span><br><span class="line"><span class="comment">-- 例子：</span></span><br><span class="line">DELIMITER $</span><br></pre></td></tr></table></figure><h3 id="1-2举例"><a href="#1-2举例" class="headerlink" title="1.2举例"></a>1.2举例</h3><h4 id="1-2-1-空参列表"><a href="#1-2-1-空参列表" class="headerlink" title="1.2.1 空参列表"></a>1.2.1 空参列表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建</span></span><br><span class="line">DELIMITER $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp1 () <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">INSERT</span> <span class="keyword">INTO</span> admin ( `username`, `password` )</span><br><span class="line">	<span class="keyword">VALUES</span></span><br><span class="line">		( <span class="string">&#x27;tom&#x27;</span>, <span class="string">&#x27;1&#x27;</span> ),</span><br><span class="line">		( <span class="string">&#x27;rose&#x27;</span>, <span class="string">&#x27;1&#x27;</span> ),</span><br><span class="line">		( <span class="string">&#x27;jack&#x27;</span>, <span class="string">&#x27;1&#x27;</span> ),</span><br><span class="line">		( <span class="string">&#x27;green&#x27;</span>, <span class="string">&#x27;1&#x27;</span> ),</span><br><span class="line">		( <span class="string">&#x27;blue&#x27;</span>, <span class="string">&#x27;1&#x27;</span> );</span><br><span class="line"><span class="keyword">END</span> $</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 调用</span></span><br><span class="line"><span class="keyword">CALL</span> myp1 () ;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 调用   <span class="built_in">cmd</span>使用需要结束符</span><br><span class="line"><span class="keyword">CALL</span> myp1 () $</span><br></pre></td></tr></table></figure><h4 id="1-2-2-带IN模式列表"><a href="#1-2-2-带IN模式列表" class="headerlink" title="1.2.2 带IN模式列表"></a>1.2.2 带IN模式列表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">PROCEDURE</span> myp2 ( <span class="keyword">IN</span> girlname <span class="type">VARCHAR</span> ( <span class="number">50</span> ), <span class="keyword">OUT</span> boyname <span class="type">VARCHAR</span> ( <span class="number">20</span> ), <span class="keyword">OUT</span> userCP <span class="type">INT</span> )</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		boys.boyName,</span><br><span class="line">		boys.userCP <span class="keyword">INTO</span> boyname,</span><br><span class="line">		userCP </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		boys</span><br><span class="line">		<span class="keyword">JOIN</span> beauty <span class="keyword">ON</span> beauty.boyfriend_id <span class="operator">=</span> boys.id </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		beauty.NAME <span class="operator">=</span> girlname;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span> $ </span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@boyname</span> <span class="operator">=</span> <span class="string">&#x27;&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SET</span> <span class="variable">@userCP</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">CALL</span> myp2 ( <span class="string">&#x27;小昭&#x27;</span>, <span class="variable">@boyname</span>, <span class="variable">@userCP</span> );</span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	<span class="variable">@boyname</span>,</span><br><span class="line">	<span class="variable">@userCP</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="1-2-3-带OUT模式列表"><a href="#1-2-3-带OUT模式列表" class="headerlink" title="1.2.3 带OUT模式列表"></a>1.2.3 带OUT模式列表</h4><h4 id="1-2-4-带INOUT模式列表"><a href="#1-2-4-带INOUT模式列表" class="headerlink" title="1.2.4 带INOUT模式列表"></a>1.2.4 带INOUT模式列表</h4><h2 id="2-函数"><a href="#2-函数" class="headerlink" title="2 函数"></a>2 函数</h2><h3 id="2-1-含义"><a href="#2-1-含义" class="headerlink" title="2.1 含义"></a>2.1 含义</h3><p>一组预先编译好的sQz语句的集合，理解成批处理语句</p><ul><li>1、提高代码的重用性</li><li>2、简化操作</li><li>3、减少了编译次数并且减少了和数据库服务器的连接次数，提高了效率<br>区别:<br>存储过程:可以有0个返回，也可以有多个返回，适合做批量插入、批量更新<br>函数:有且仅有1个返回，适合做处理数据后返回一个结果</li></ul><h3 id="2-2-创建函数"><a href="#2-2-创建函数" class="headerlink" title="2.2 创建函数"></a>2.2 创建函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 如果报错1418，在最前面添加 </span></span><br><span class="line"><span class="comment">-- 	select @@global.log_bin_trust_function_creators = 1 ;</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> 函数名(参数列表) <span class="keyword">returns</span> 返回类型</span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	函数体</span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="comment">-- 注意</span></span><br><span class="line"><span class="comment">-- 参数列表包含：参数名 参数类型</span></span><br><span class="line"><span class="comment">-- 函数体：肯定会有return 语句，如果没有会报错，但如果return不放在最后，也不会报错</span></span><br><span class="line"><span class="comment">-- 只有一句话可以省略begin end</span></span><br><span class="line"><span class="comment">-- 使用delimiter 语句设置结束标记</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2-3调用函数"><a href="#2-3调用函数" class="headerlink" title="2.3调用函数"></a>2.3调用函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> 函数名(参数列表)</span><br></pre></td></tr></table></figure><h3 id="2-4查看函数"><a href="#2-4查看函数" class="headerlink" title="2.4查看函数"></a>2.4查看函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">show create function 函数名;</span><br></pre></td></tr></table></figure><h3 id="2-5删除函数"><a href="#2-5删除函数" class="headerlink" title="2.5删除函数"></a>2.5删除函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">drop function 函数名;</span><br></pre></td></tr></table></figure><h3 id="2-6-举例"><a href="#2-6-举例" class="headerlink" title="2.6 举例"></a>2.6 举例</h3><h4 id="2-6-1-无参有返回值"><a href="#2-6-1-无参有返回值" class="headerlink" title="2.6.1 无参有返回值"></a>2.6.1 无参有返回值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> fv1 () <span class="keyword">RETURNS</span> <span class="type">INT</span> <span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span></span><br><span class="line">		a <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">into</span> a </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees;</span><br><span class="line">	<span class="keyword">RETURN</span> a;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> fv1()$</span><br></pre></td></tr></table></figure><h4 id="2-6-2-有参有返回值"><a href="#2-6-2-有参有返回值" class="headerlink" title="2.6.2 有参有返回值"></a>2.6.2 有参有返回值</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">delimiter $</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">FUNCTION</span> fv3 (</span><br><span class="line">	deptName <span class="type">VARCHAR</span> ( <span class="number">20</span> )) <span class="keyword">RETURNS</span> <span class="keyword">DOUBLE</span> </span><br><span class="line"><span class="keyword">BEGIN</span></span><br><span class="line">	<span class="keyword">DECLARE</span></span><br><span class="line">		agv <span class="keyword">DOUBLE</span> <span class="keyword">DEFAULT</span> <span class="number">0</span>;</span><br><span class="line">	<span class="keyword">SELECT</span></span><br><span class="line">		<span class="built_in">AVG</span>( salary ) <span class="keyword">INTO</span> agv </span><br><span class="line">	<span class="keyword">FROM</span></span><br><span class="line">		employees e</span><br><span class="line">		<span class="keyword">JOIN</span> departments d <span class="keyword">ON</span> d.department_id <span class="operator">=</span> e.department_id </span><br><span class="line">	<span class="keyword">WHERE</span></span><br><span class="line">		d.department_name <span class="operator">=</span> deptName </span><br><span class="line">	<span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">		e.department_id;</span><br><span class="line">	<span class="keyword">RETURN</span> agv;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">END</span> $</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	fv3 ( <span class="string">&#x27;Adm&#x27;</span> )$</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/a82b342a/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/a82b342a/" class="post-title-link" itemprop="url">MySQL:变量定义</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:33:32" itemprop="dateCreated datePublished" datetime="2022-03-12T15:33:32+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>1.3k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><pre><code>系统变量:
    全局变量
        作用域:服务器每次启动将为所有的全局变量赋初始值，针对于所有的会话（连接）有效，但不能跨重启；如果要保证重启不变，则需要修改配置文件；
    会话变量
        作用域：仅仅针对当前连接有效
自定义变量:
    用户变量
    局部变量
</code></pre><h3 id="1-系统变量"><a href="#1-系统变量" class="headerlink" title="1.系统变量"></a>1.系统变量</h3><h4 id="1-1-系统变量定义"><a href="#1-1-系统变量定义" class="headerlink" title="1.1 系统变量定义"></a>1.1 系统变量定义</h4><pre><code>说明:变量由系统提供，不是用户定义，属于服务器层面使用的语法；
查看全局变量需要关键字 global ，查看会话变量需要关键字 session 或者不写。
</code></pre><h4 id="1-2-查看"><a href="#1-2-查看" class="headerlink" title="1.2 查看"></a>1.2 查看</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查看所有系统变量</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span> VARIABLES;  <span class="comment">-- 查看所有全局变量</span></span><br><span class="line"><span class="keyword">SHOW</span> [SESSION] VARIABLES; <span class="comment">-- 查看所有会话变量</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2.查看满足条件的部分系统变量</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">GLOBAL</span><span class="operator">|</span>SESSION VARIABLES <span class="keyword">like</span> <span class="string">&#x27;%char%&#x27;</span>; <span class="comment">--查看字符相关的变量</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.查看指定的某个系统变量的值</span></span><br><span class="line"><span class="keyword">select</span> @<span class="variable">@global</span>.系统变量名; <span class="comment">-- 查看全局变量的</span></span><br><span class="line"><span class="keyword">select</span> @@系统变量名; <span class="comment">-- 查看会话变量</span></span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 4.为某个系统变量赋值</span><br><span class="line">set global 系统变量名 = 值;  -- 方式一</span><br><span class="line">set [session] 系统变量名 = 值;  -- 方式一</span><br><span class="line">set @@global.系统变量名 = 值;  -- 方式二</span><br><span class="line">set @@session.系统变量名 = 值;  -- 方式二</span><br></pre></td></tr></table></figure><h3 id="2-自定义变量"><a href="#2-自定义变量" class="headerlink" title="2.自定义变量"></a>2.自定义变量</h3><p>说明:变量是用户自定义的，不是由系统定义的<br>使用步骤:声明、赋值、使用(查看、比较、运算等)</p><h4 id="2-1-用户变量"><a href="#2-1-用户变量" class="headerlink" title="2.1 用户变量"></a>2.1 用户变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-- 作用域:针对于当前会话(连接)有效，同于会话变量的作用域</span><br><span class="line">-- 1.声明并初始化</span><br><span class="line">set @用户变量名 = 值；      -- 方式一</span><br><span class="line">set @用户变量名 := 值；     -- 方式二</span><br><span class="line">select @用户变量名 := 值；  -- 方式三</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-- 2.赋值</span><br><span class="line">-- 通过set和select</span><br><span class="line">set @用户变量名 = 值；      -- 方式一</span><br><span class="line">set @用户变量名 := 值；     -- 方式二</span><br><span class="line">select @用户变量名 := 值；  -- 方式三</span><br><span class="line">-- 通过select into</span><br><span class="line">select 字段名 into 变量名 from 表；</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3.使用</span></span><br><span class="line"><span class="keyword">select</span> @变量名   <span class="comment">-- 查看</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 例子</span></span><br><span class="line"><span class="keyword">set</span> <span class="variable">@count</span> <span class="operator">=</span> <span class="number">1</span>;  <span class="comment">-- 声明并初始化</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">into</span> <span class="variable">@count</span> <span class="keyword">from</span> employees;  <span class="comment">-- 赋值</span></span><br><span class="line"><span class="keyword">select</span> <span class="variable">@count</span>;  <span class="comment">-- 查看</span></span><br></pre></td></tr></table></figure><h4 id="2-2-局部变量"><a href="#2-2-局部变量" class="headerlink" title="2.2 局部变量"></a>2.2 局部变量</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 作用域：仅仅在定义它的begin end中有效，应用在begin end中的第一句话！！！</span></span><br><span class="line"><span class="comment">-- 1.声明</span></span><br><span class="line"><span class="keyword">DECLARE</span> 变量名 类型;</span><br><span class="line"><span class="keyword">DECLARE</span> 变量名 类型 <span class="keyword">DEFAULT</span> 值;</span><br><span class="line"><span class="comment">-- 2.赋值</span></span><br><span class="line"><span class="comment">-- 方式一:通过SET或SELECT</span></span><br><span class="line"><span class="keyword">SET</span> 局部变量名 <span class="operator">=</span> 值;</span><br><span class="line"><span class="keyword">SET</span> 局部变量名 :<span class="operator">=</span> 值;</span><br><span class="line"><span class="keyword">SELECT</span>@局部变量名:<span class="operator">=</span>值;</span><br><span class="line"><span class="comment">-- 方式二:通过SELECT INTO</span></span><br><span class="line"><span class="keyword">SELECT</span> 字段 <span class="keyword">INTO</span> 局部变量名 <span class="keyword">FROM</span> 表;</span><br><span class="line"><span class="comment">-- 3.使用</span></span><br><span class="line"><span class="keyword">SELECT</span> 局部变量名;</span><br></pre></td></tr></table></figure><h4 id="2-3对比用户变量和局部变量"><a href="#2-3对比用户变量和局部变量" class="headerlink" title="2.3对比用户变量和局部变量:"></a>2.3对比用户变量和局部变量:</h4><table><thead><tr><th align="center"></th><th align="center">用户变量</th><th align="center">局部变量</th></tr></thead><tbody><tr><td align="center">作用域</td><td align="center">当前会话</td><td align="center">BEGIN END中</td></tr><tr><td align="center">定义和使用的位置</td><td align="center">会话中的任何地方</td><td align="center">只能在BEGIN END中，且为第一句话</td></tr><tr><td align="center">语法</td><td align="center">必须加@符号，不用限定类型</td><td align="center">一般不用加@符号，需要限定类型</td></tr></tbody></table></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/e03471c6/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/e03471c6/" class="post-title-link" itemprop="url">MySQL:view(视图)</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:33:02" itemprop="dateCreated datePublished" datetime="2022-03-12T15:33:02+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>937</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h3 id="1-含义"><a href="#1-含义" class="headerlink" title="1.含义"></a>1.含义</h3><ul><li>mysql 15.1版本出现</li><li>虚拟表，和普通表一样使用，是通过表动态生成的数据。</li><li>只有sql的逻辑，没有具体数据。</li></ul><h3 id="2-应用场景"><a href="#2-应用场景" class="headerlink" title="2.应用场景"></a>2.应用场景</h3><ul><li>多个地方用到的查询结果</li><li>该查询结果使用的sql语句较复杂</li></ul><h3 id="3-优点"><a href="#3-优点" class="headerlink" title="3.优点"></a>3.优点</h3><ul><li>重用sql语句</li><li>简化复杂的sql操作，不必知道它的查询细节</li><li>保护数据，提高安全性</li></ul><h3 id="4-视图结构的修改语法"><a href="#4-视图结构的修改语法" class="headerlink" title="4.视图结构的修改语法"></a>4.视图结构的修改语法</h3><h4 id="4-1视图的创建"><a href="#4-1视图的创建" class="headerlink" title="4.1视图的创建"></a>4.1视图的创建</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> q1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> e.last_name ,d.department_name,j.job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> jobs j</span><br><span class="line"><span class="keyword">ON</span> j.job_id <span class="operator">=</span> e.job_id;</span><br></pre></td></tr></table></figure><h4 id="4-2视图的修改"><a href="#4-2视图的修改" class="headerlink" title="4.2视图的修改"></a>4.2视图的修改</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法一：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 语法二：</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><h4 id="4-3视图的删除"><a href="#4-3视图的删除" class="headerlink" title="4.3视图的删除"></a>4.3视图的删除</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> 视图名,视图名,……;</span><br></pre></td></tr></table></figure><h4 id="4-4视图的查看"><a href="#4-4视图的查看" class="headerlink" title="4.4视图的查看"></a>4.4视图的查看</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> q1; <span class="comment">-- 查看结构</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> q1;<span class="comment">--查看具体细节</span></span><br></pre></td></tr></table></figure><h3 id="5-视图数据的更新语法"><a href="#5-视图数据的更新语法" class="headerlink" title="5.视图数据的更新语法"></a>5.视图数据的更新语法</h3><h4 id="5-1插入"><a href="#5-1插入" class="headerlink" title="5.1插入"></a>5.1插入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 视图名 values (属性1，属性2，属性3，……);</span><br></pre></td></tr></table></figure><h4 id="5-2修改"><a href="#5-2修改" class="headerlink" title="5.2修改"></a>5.2修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 视图名 values (属性1，属性2，属性3，……);</span><br></pre></td></tr></table></figure><p>视图的可更新性和视图中查询的定义有关系，以下类型的视图是不能更新的。</p><ul><li>包含以下关键字的sql语句:分组函数、distinct、group by、 having、union或者union all</li><li>常量视图</li><li>Select中包含子查询join</li><li>from一个不能更新的视图</li><li>where子句的子查询引用了from子句中的表</li></ul><h3 id="6-视图和表的异同"><a href="#6-视图和表的异同" class="headerlink" title="6.视图和表的异同"></a>6.视图和表的异同</h3><p>视图可以当做表进行查询，但不能修改原表数据</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：可以当成表一样使用</span></span><br><span class="line"><span class="keyword">SELECT</span> 查询列表</span><br><span class="line"><span class="keyword">FROM</span> 视图名</span><br><span class="line"><span class="keyword">WHERE</span> 筛选条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组列表</span><br><span class="line"><span class="keyword">HAVING</span> 筛选条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 排序</span><br><span class="line">LIMIT 起始索引 条目数;</span><br></pre></td></tr></table></figure><table><thead><tr><th align="center"></th><th align="center">创建语法的关键字</th><th align="center">是否实际占用物理空间</th><th align="center">使用</th></tr></thead><tbody><tr><td align="center">视图</td><td align="center">create view</td><td align="center">只是保存了sql逻辑</td><td align="center">可以但一般不能增删改查</td></tr><tr><td align="center">表</td><td align="center">create table</td><td align="center">保存了数据</td><td align="center">增删改查</td></tr></tbody></table></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/3112a4fe/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/3112a4fe/" class="post-title-link" itemprop="url">MySQL:TCL（事务控制语言）</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:32:19" itemprop="dateCreated datePublished" datetime="2022-03-12T15:32:19+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>9.9k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>9 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h3 id="1-概念"><a href="#1-概念" class="headerlink" title="1.概念"></a>1.概念</h3><p>​ 事务：<br>​ 事务由单独单元的一个或多个sQL语句组成，在这个单元中﹐每个MySQL语句是相互侬赖的。而整个单独单元作为一个不可分割的整体﹐如果单元中某条SQL语句一旦执行失败或产生错误，整个单元将会回滚。所有受到影响的数据将返回到事物开始以前的状态;如果单元中的所有sQL语句均执行成功﹐则事物被顺利执行。<br>​ 存储引擎：<br>​ 1、概念:在mysql中的数据用各种不同的技术存储在文件（或内存）中。<br>​ 2、通过show engines;来查看mysql支持的存储引擎。<br>​ 3、在mysql中用的最多的存储引擎有: innodb,myisam,memory等。<br>​ 其中innodb支持事务，而myisam、memory等不支持事务</p><h3 id="2-ACID属性"><a href="#2-ACID属性" class="headerlink" title="2.ACID属性"></a>2.ACID属性</h3><p>​ 1.原子性（Atomicity)<br>​ 原子性是指事务是一个个可刀P一lr十都发生，要么都不发生。<br>​ 2.一致性（Consistency)<br>​ 事务必须使数据库从一个一致性状态变换到另外一个一致性状态<br>​ 3.隔离性(Isolation)<br>​ 事务的隔离性是指一个事务的执行不能被其他事务干扰，即一个事务内部的操作及使用的数据对并发的其他事务是隔离的，并发执行的各个事务之间不能互相千扰。<br>​ 4.持久性（Durability)<br>​ 持久性是指一个事务一旦被提交，它对数据库中数据的改变就是永久性的，接下来的其他操作和数据库故障不应该对其有任何影响</p><h3 id="3-事务的创建"><a href="#3-事务的创建" class="headerlink" title="3.事务的创建"></a>3.事务的创建</h3><p>​ 隐式事务:事务没有明显的开启和结束的标记比如insert、 update、 delete语句<br>​ 显式事务:事务具有明显的开启和结束的标记前提:必须先设置自动提交功能为禁用<br>​</p><pre><code>设置自动提交功能关闭 set autocommit = 0;
步骤:
    1.开始事务
    set autocommit = 0;
    start transaction;（可选的）
    2.编写事务中sql语句(select insert update delete)
    执行语句一;
    执行语句二;
    ……;
    3.结束事务(此时事务处理完成，储存在内存中)
    commit;提交事务（更新到磁盘）
    rollback;回滚事务（撤销事务的指令）
</code></pre><h3 id="4-事务的使用步骤"><a href="#4-事务的使用步骤" class="headerlink" title="4.事务的使用步骤"></a>4.事务的使用步骤</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    id  username   balance  </span></span><br><span class="line"><span class="comment">------  ---------  ---------</span></span><br><span class="line"><span class="comment">     1  张无忌              1000</span></span><br><span class="line"><span class="comment">     2  赵敏              1000</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 1.开始事务</span></span><br><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="comment">-- 2.编写事务</span></span><br><span class="line">UPDATE account <span class="keyword">SET</span> balance <span class="operator">=</span> <span class="number">500</span> <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;张无忌&#x27;</span>;</span><br><span class="line">UPDATE account <span class="keyword">SET</span> balance <span class="operator">=</span> <span class="number">1500</span> <span class="keyword">WHERE</span> username <span class="operator">=</span> <span class="string">&#x27;赵敏&#x27;</span>;</span><br><span class="line"><span class="comment">-- 3.结束事务</span></span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br></pre></td></tr></table></figure><h5 id="delete和truncate在事务使用时的区别"><a href="#delete和truncate在事务使用时的区别" class="headerlink" title="delete和truncate在事务使用时的区别"></a>delete和truncate在事务使用时的区别</h5><p>delete支持回滚，truncate不支持回滚</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 使用delete 删除表格</span></span><br><span class="line"><span class="keyword">set</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表<span class="number">1</span>;</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表<span class="number">1</span>; <span class="comment">-- 此时还能查询到表1</span></span><br><span class="line"><span class="comment">-- 使用delete 删除表格</span></span><br><span class="line"><span class="keyword">set</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表<span class="number">1</span>;</span><br><span class="line"><span class="keyword">rollback</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> 表<span class="number">1</span>; <span class="comment">-- 此时不能查询到表1</span></span><br></pre></td></tr></table></figure><h3 id="5-数据的隔离级别"><a href="#5-数据的隔离级别" class="headerlink" title="5.数据的隔离级别"></a>5.数据的隔离级别</h3><h4 id="5-1-并发问题"><a href="#5-1-并发问题" class="headerlink" title="5.1.并发问题"></a>5.1.并发问题</h4><pre><code>对于同时运行的多个事务,当这些事务访问数据库中相同的数据时,如果没有采取必要的隔离机制,就会导致各种并发问题:
脏读:
    对于两个事务T1,T2,
    T1读取了已经被T2更新但还没有被提交的字段之后,
    若T2回滚,T1读取的内容就是临时且无效的。
不可重复读:
    对于两个事务T1,T2,
    T1读取了一个字段,然后T2更新了该字段之后,
    T1再次读取同一个字段,值就不同了。
幻读:
    对于两个事务T1,T2,
    T1从一个表中读取了一个字段,然后T2在该表中插入了一些新的行之后,
    如果T1再次读取同一个表,就会多出几行.
</code></pre><h4 id="5-22-隔离级别"><a href="#5-22-隔离级别" class="headerlink" title="5.22.隔离级别"></a>5.22.隔离级别</h4><pre><code>数据库事务的隔离性:
    数据库系统必须具有隔离并发运行各个事务的能力，使它们不会相互影响,避免各种并发问题。
一个事务与其他事务隔离的程度称为隔离级别.数据库规定了多种事务隔离级别,不同隔离级别对应不同的干扰程度,隔离级别越高,数据一致性就越好,但并发性越弱.
</code></pre><table><thead><tr><th align="center">隔离级别</th><th align="center">描述</th></tr></thead><tbody><tr><td align="center">READ UNCOMMITTED (读未提交数据)</td><td align="center">允许事务读取未被其他事物提交的变更.脏读,不可重复读和幻读的问题都会出现</td></tr><tr><td align="center">READ COMMITED (读已提交数据)</td><td align="center">只允许事务读取已经被其它事务提交的变更.可以避免脏读,但不可重复读和幻读问题仍然可能出现</td></tr><tr><td align="center">REPEATABLE READ (可重复读)</td><td align="center">确保事务可以多次从一个字段中读取相同的值.在这个事务持续期问,禁止其他事物对这个字段进行更新.可以避免脏读和不可重复读.但幻读的问题仍然存在.</td></tr><tr><td align="center">SERIALIZABLE (串行化)</td><td align="center">确保事务可以从一个表中读取相同的行.在这个事务持续期间,禁止其他事务对该表执行插入.更新和删除操作.所有并发问题都可以避免,但性能十分低下</td></tr></tbody></table><pre><code>Oracle支持的2种事务隔离级别:READ COMMITED,SERIALIZABLE。Oracle 默认的事务隔离级洲为:READ COMMITED
Mysql支持4种事务隔离级别.Mysql默认的事务隔离级别为: REPEATABLE READ

通过命令查看当前隔离级别
select @@tx_isolation  （Mysql5）
select @@transaction_isolation  （Mysql8）
设置最低的隔离级别
set session transaction isolation level read uncommitted
</code></pre><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#数据</span><br><span class="line">select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1500</span> |</span><br><span class="line">+----+-----------+---------+</span><br></pre></td></tr></table></figure><p>######2.1隔离级别为READ UNCOMMITTED</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：修改隔离级别，并查看隔离级别</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level read uncommitted;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-UNCOMMITTED        |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：修改隔离级别，并查看隔离级别和表数据</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level read uncommitted;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-UNCOMMITTED        |</span><br><span class="line">+-------------------------+</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌   |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：开启事务，修改数据，但不结束事务</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; update account <span class="built_in">set</span> username =  &#x27;张飞&#x27; where id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：读数数据，</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; update account <span class="built_in">set</span> username =  &#x27;张飞&#x27; where id = <span class="number">1</span>;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张飞     |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">#数据发生改变，读取了窗口一未提交的数据，产生脏读</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：结束事务，回滚撤销</span><br><span class="line">mysql&gt; rollback;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：重新读取数据，数据变回原来样子</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌   |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">#同一事务，查询前后不一致，产生不可重复读</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><p>######2.2隔离级别为READ COMMITTED</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：修改隔离级别，并查看隔离级别</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level read committed;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED          |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：修改隔离级别，并查看隔离级别和表数据</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level read committed;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| READ-COMMITTED          |</span><br><span class="line">+-------------------------+</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌   |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：开启事务，修改数据，但不结束事务</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; update account <span class="built_in">set</span> username =  &#x27;张飞&#x27; where id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：开启事务，读取数据，数据没有发生改变，没有产生脏读现象</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1500</span> |</span><br><span class="line">+----+-----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：结束事务，提交</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：读取数据，数据发生改变，说明读取了窗口一提交后的数据</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张飞     |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">#但同一数据，前后查询现象不一样，产生不可重复读</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><p>######2.3隔离级别为REPEATABLE READ</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：修改隔离级别，并查看隔离级别</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level repeatable read;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：修改隔离级别，并查看隔离级别和表数据</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level repeatable read;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张飞     |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：开启事务，修改数据，但不结束事务</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; update account <span class="built_in">set</span> username =  &#x27;张飞&#x27; where id = <span class="number">1</span>;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：开启事务，读取数据，数据没有发生改变，没有产生脏读现象</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1500</span> |</span><br><span class="line">+----+-----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：结束事务，提交</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：读取数据，数据仍然没发生改变</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张飞     |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">#同一事务，没有脏读，可重复读</span><br><span class="line"></span><br><span class="line">#新开一个事务，更新数据</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1500</span> |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><p>######2.4产生幻读</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：修改隔离级别，并查看隔离级别</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level repeatable read;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌   |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：修改隔离级别，并查看隔离级别和表数据</span><br><span class="line">mysql&gt; <span class="built_in">set</span> session transaction isolation level repeatable read;</span><br><span class="line">mysql&gt; select @@transaction_isolation;</span><br><span class="line">+-------------------------+</span><br><span class="line">| @@transaction_isolation |</span><br><span class="line">+-------------------------+</span><br><span class="line">| REPEATABLE-READ         |</span><br><span class="line">+-------------------------+</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌   |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：开启事务</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：开启事务，增加数据，</span><br><span class="line">mysql&gt; <span class="built_in">set</span> autocommit = <span class="number">0</span>;</span><br><span class="line">mysql&gt; insert into account values(<span class="number">3</span>,&#x27;小昭&#x27;,<span class="number">1000</span>);</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：修改数据，但不结束事务</span><br><span class="line">mysql&gt; update account <span class="built_in">set</span> balance =  <span class="number">1000</span>;</span><br><span class="line">#理论上修改两行数据</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |    <span class="number">1000</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1000</span> |</span><br><span class="line">+----+-----------+---------+</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：结束事务</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#窗口一：修改了三行数据</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |    <span class="number">1000</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1000</span> |</span><br><span class="line">|  <span class="number">3</span> | 小昭      |    <span class="number">1000</span> |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">#产生幻读</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">#窗口二：读取数据，数据仍然没发生改变</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+----------+---------+</span><br><span class="line">| id | username | balance |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张飞     |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏     |    <span class="number">1500</span> |</span><br><span class="line">+----+----------+---------+</span><br><span class="line">#同一事务，没有脏读，可重复读</span><br><span class="line"></span><br><span class="line">#新开一个事务，更新数据</span><br><span class="line">mysql&gt; commit;</span><br><span class="line">mysql&gt; select * from account;</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">| id | username  | balance |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">|  <span class="number">1</span> | 张无忌    |     <span class="number">500</span> |</span><br><span class="line">|  <span class="number">2</span> | 赵敏      |    <span class="number">1500</span> |</span><br><span class="line">+----+-----------+---------+</span><br><span class="line">mysql&gt; commit;</span><br></pre></td></tr></table></figure><p>######2.5隔离级别为SERIALIZABLE<br>将其他事务处于阻塞状态，且有限时间等待，效率较低</p><pre><code>每启动一个mysql程序,就会获得一个单独的数据库连接.
每个数据库连接都有一个全局变量@@tx_isolation (@@transaction_isolation), 表示当前的事务隔离级别.
查看当前的隔离级别: SELECT @@tx_isolation(@@transaction_isolation); 设置当前mysQL连接的隔离级别:
set transaction isolation level read committed;
设置薮据库系统的全局的隔离级别:
set global transaction isolation level read committed;
</code></pre><p>#####3.保存点（savepoint)<br>格式：<br>savepoint 节点名;</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SET</span> autocommit <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"><span class="keyword">START</span> TRANSACTION;</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> account <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">SAVEPOINT</span> a; #设置保存点</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> account <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span> <span class="keyword">TO</span> a;#回滚到保存点</span><br></pre></td></tr></table></figure><p>####3.视图<br>MySQL从5.0.1版本开始提供视图功能。一种虚拟存在的表，行和列的数据来自定义视图的查询中使用的表，并且是在使用视图时动态生成的，只保存了sql逻辑，不保存查询结果<br>应用场景:<br>多个地方用到同样的查询结果<br>该查询结果使用的sql语句较复杂<br>#####3.1视图的创建</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> q1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> e.last_name ,d.department_name,j.job_title</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.department_id <span class="operator">=</span> d.department_id</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> jobs j</span><br><span class="line"><span class="keyword">ON</span> j.job_id <span class="operator">=</span> e.job_id;</span><br></pre></td></tr></table></figure><p>#####3.2视图的使用</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法：可以当成表一样使用</span></span><br><span class="line"><span class="keyword">SELECT</span> 查询列表</span><br><span class="line"><span class="keyword">FROM</span> 视图名</span><br><span class="line"><span class="keyword">WHERE</span> 筛选条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组列表</span><br><span class="line"><span class="keyword">HAVING</span> 筛选条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 排序</span><br><span class="line">LIMIT 起始索引 条目数;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">FROM</span> q1</span><br><span class="line"><span class="keyword">WHERE</span> e.email <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br></pre></td></tr></table></figure><p>#####3.3视图的好处<br>重用sql语句<br>简化复杂的sql操作，不必知道它的查询细节<br>保护数据，提高安全性<br>#####3.4视图的修改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 语法一：</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">OR</span> REPLACE <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 语法二：</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> 视图名</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line">查询语句;</span><br></pre></td></tr></table></figure><p>#####3.5视图的删除</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> 视图名,视图名,……;</span><br></pre></td></tr></table></figure><p>#####3.6视图的查看</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESC</span> q1; <span class="comment">-- 查看结构</span></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">CREATE</span> <span class="keyword">VIEW</span> q1;<span class="comment">--查看具体细节</span></span><br></pre></td></tr></table></figure><p>#####3.7视图的更新<br>视图的可更新性和视图中查询的定义有关系，以下类型的视图是不能更新的。<br>包含以下关键字的sql语句:<br>分组函数、distinct、group by、 having、union或者union all<br>常量视图<br>select中包含子查询<br>join<br>from一个不能更新的视图<br>where子句的子查询引用了from子句中的表<br>#####3.8视图和表的比较</p><table><thead><tr><th align="center"></th><th align="center">创建语法的关键字</th><th align="center">是否实际占用物理空间</th><th align="center">使用</th></tr></thead><tbody><tr><td align="center">视图</td><td align="center">create view</td><td align="center">只是保存了sql逻辑</td><td align="center">可以但一般不能增删改查</td></tr><tr><td align="center">表</td><td align="center">create table</td><td align="center">保存了数据</td><td align="center">增删改查</td></tr></tbody></table></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/9938db0d/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/9938db0d/" class="post-title-link" itemprop="url">MySQL:DDL（数据定义语言）</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:31:46" itemprop="dateCreated datePublished" datetime="2022-03-12T15:31:46+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>5.5k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>5 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h3 id="1-库和表的管理"><a href="#1-库和表的管理" class="headerlink" title="1.库和表的管理"></a>1.库和表的管理</h3><p>​ 一、库的管理<br>​ 创建、修改、删除<br>​ 二、表的管理<br>​ 创建、修改、删除<br>​ 创建:create<br>​ 修改:alter<br>​ 删除:drop</p><h4 id="1-1-库管理"><a href="#1-1-库管理" class="headerlink" title="1.1.库管理"></a>1.1.库管理</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建一个库books</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE books;</span><br><span class="line"><span class="keyword">SHOW</span> DATABASES;</span><br><span class="line"><span class="comment">-- 增加容错性</span></span><br><span class="line"><span class="keyword">CREATE</span> DATABASE IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> books ;</span><br><span class="line"><span class="comment">-- 暂时不能修改库名，容易丢失数据，不够安全</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 更改字符集</span></span><br><span class="line"><span class="keyword">ALTER</span> DATABASE books <span class="type">CHARACTER</span> <span class="keyword">SET</span> gbk;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 删除库</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> books;</span><br></pre></td></tr></table></figure><h4 id="1-2-表的管理"><a href="#1-2-表的管理" class="headerlink" title="1.2.表的管理"></a>1.2.表的管理</h4><h5 id="1-2-1-表结构的创建"><a href="#1-2-1-表结构的创建" class="headerlink" title="1.2.1 表结构的创建"></a>1.2.1 表结构的创建</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span>表名(</span><br><span class="line">    列名 列的类型【(长度) 约束】</span><br><span class="line">    列名 列的类型【(长度) 约束】</span><br><span class="line">    列名 列的类型【(长度) 约束】</span><br><span class="line">    列名 列的类型【(长度) 约束】</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 在books库中创建book表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> IF <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> book(</span><br><span class="line">    id <span class="type">INT</span>,</span><br><span class="line">    bName <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    price <span class="keyword">DOUBLE</span>,</span><br><span class="line">    authorId <span class="type">INT</span>,</span><br><span class="line">    publishDate DATETIME</span><br><span class="line">    );</span><br><span class="line">    </span><br><span class="line"><span class="keyword">DESC</span> book;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h5 id="1-2-2-表结构的修改"><a href="#1-2-2-表结构的修改" class="headerlink" title="1.2.2.表结构的修改"></a>1.2.2.表结构的修改</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> 表名 change<span class="operator">|</span><span class="keyword">add</span><span class="operator">|</span><span class="keyword">drop</span><span class="operator">|</span>modify <span class="keyword">column</span> 列名 【类型 约束】;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改列名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book CHANGE <span class="keyword">COLUMN</span> publishDate pubDate DATETIME;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改类型</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book MODIFY <span class="keyword">COLUMN</span> pubDate <span class="type">TIMESTAMP</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 添加新列</span></span><br><span class="line"><span class="comment">-- ALTER TABLE book ADD COLUMN 列名 类型 【first|after 字段名】</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> annual <span class="keyword">DOUBLE</span> <span class="keyword">first</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除列</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> book <span class="keyword">DROP</span> <span class="keyword">COLUMN</span> annual;</span><br></pre></td></tr></table></figure><h5 id="1-2-3-表结构的删除"><a href="#1-2-3-表结构的删除" class="headerlink" title="1.2.3.表结构的删除"></a>1.2.3.表结构的删除</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改表名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> author RENAME <span class="keyword">TO</span> book_author;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> book_author;</span><br><span class="line"><span class="keyword">SHOW</span> TABLES <span class="keyword">FROM</span> books;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 通用写法</span></span><br><span class="line"><span class="comment">-- 新建库</span></span><br><span class="line"><span class="keyword">DROP</span> DATABASE IF <span class="keyword">EXISTS</span> 库名;</span><br><span class="line"><span class="keyword">CREATE</span> DATABASE 库名;</span><br><span class="line"><span class="comment">-- 新建表</span></span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> 表名;</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名 ();</span><br></pre></td></tr></table></figure><h5 id="1-2-4-表的复制"><a href="#1-2-4-表的复制" class="headerlink" title="1.2.4.表的复制"></a>1.2.4.表的复制</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 表的复制</span></span><br><span class="line"><span class="comment">-- 仅仅复制表的结构</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">LIKE</span> 旧表</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 复制表的结构和数据</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> 表名 </span><br><span class="line">    <span class="keyword">SELECT</span> 查询列表 <span class="keyword">FROM</span> 表名</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 仅仅复制表的结构</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newcopy <span class="keyword">LIKE</span> author;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 复制表的全部</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newcopy2 </span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 复制表的部分数据</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newcopy3 </span><br><span class="line">    <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> author</span><br><span class="line">    <span class="keyword">WHERE</span> nation <span class="operator">=</span> <span class="string">&#x27;中国&#x27;</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 复制表的列</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newcopy4 </span><br><span class="line">    <span class="keyword">SELECT</span> `name` <span class="keyword">FROM</span> author;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 复制表的部分字段（丢弃所有数据）</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> newcopy5</span><br><span class="line">    <span class="keyword">SELECT</span> `name` ,id <span class="keyword">FROM</span> author</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="literal">FALSE</span>;</span><br></pre></td></tr></table></figure><h3 id="2-数据类型介绍"><a href="#2-数据类型介绍" class="headerlink" title="2.数据类型介绍"></a>2.数据类型介绍</h3><h4 id="2-1-整型"><a href="#2-1-整型" class="headerlink" title="2.1.整型"></a>2.1.整型</h4><pre><code><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 整型类型</span></span><br><span class="line">    Tinyint(M,D)</span><br><span class="line">    <span class="type">Smallint</span>(M,D)</span><br><span class="line">    Mediumint(M,D)</span><br><span class="line">    <span class="type">Int</span>(M,D) <span class="operator">/</span> <span class="type">integer</span>(M,D)</span><br><span class="line">    <span class="type">Bigint</span>(M,D)</span><br><span class="line"><span class="number">1.</span>都可以设置无符号和有符号，默认有符号，通过unsigned设置无符号</span><br><span class="line"><span class="number">2.</span>如果超过了范围，会报 <span class="keyword">out</span> <span class="keyword">or</span> <span class="keyword">range</span> 异常，插入临界值</span><br><span class="line"><span class="number">3.</span>长度可以不指定，默认会有一个长度</span><br><span class="line">  长度代表显示的最大宽度，如果不够左边可以用 <span class="number">0</span> 代替，但需要搭配 zerofull ,并且变为无符号整型</span><br></pre></td></tr></table></figure>
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 设置无符号和有符号位</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test (</span><br><span class="line">type1 <span class="type">INT</span>,  <span class="comment">-- 有符号</span></span><br><span class="line">type2 <span class="type">INT</span> UNSIGNED  <span class="comment">-- 无符号</span></span><br><span class="line">);</span><br><span class="line"><span class="comment">-- 超出范围则设置临界值</span></span><br></pre></td></tr></table></figure><h4 id="2-2-小数"><a href="#2-2-小数" class="headerlink" title="2.2.小数"></a>2.2.小数</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">小数 </span><br><span class="line">   浮点型 <span class="type">float</span>(M,D)、 <span class="keyword">double</span>(M,D)</span><br><span class="line">   定点型 <span class="type">dec</span>(M,D) <span class="operator">/</span> <span class="type">decimal</span>(M,D)</span><br><span class="line">   M指的是数据总长度，D指的是小数点后保留的位数</span><br><span class="line"><span class="number">1.</span>M,D都可以省略，</span><br><span class="line">  如果是 <span class="type">float</span>和 <span class="keyword">double</span>，则会根据插入的数值的精度来决定</span><br><span class="line">  如果是 <span class="type">decimal</span>,则M默认为 <span class="number">10</span>，D默认为 <span class="number">0</span></span><br><span class="line">  定点数比 <span class="keyword">double</span>精度要高，如货币运算等则考虑使用   </span><br><span class="line">原则：<span class="keyword">sql</span></span><br><span class="line">  所选择的类型越简单越好，能保存数值的类型越小越好</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 例子</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test (</span><br><span class="line">type1 <span class="type">FLOAT</span>(<span class="number">5</span>,<span class="number">2</span>) ,</span><br><span class="line">type2 <span class="keyword">DOUBLE</span>(<span class="number">5</span>,<span class="number">2</span>),</span><br><span class="line">type3 <span class="type">DEC</span>(<span class="number">5</span>,<span class="number">2</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test <span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">2.22233</span>,<span class="number">2.22233</span>,<span class="number">2.22233</span>),</span><br><span class="line">(<span class="number">2.23</span>,<span class="number">2.23</span>,<span class="number">2.23</span>),</span><br><span class="line">(<span class="number">2</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><h4 id="2-3-字符型"><a href="#2-3-字符型" class="headerlink" title="2.3.字符型"></a>2.3.字符型</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">较短的文本</span><br><span class="line">    <span class="type">char</span>(M)    固定长度的字符（只要填写就是固定字符长度。比较耗费空间）</span><br><span class="line">    <span class="type">varchar</span>(M) 不定长度的字符（字符长度随填写变化，效率较低）</span><br><span class="line">    M指的是字符长度，<span class="type">char</span>可以省略，默认为<span class="number">1</span>；<span class="type">varchar</span>不能省略</span><br><span class="line">    其他类型： <span class="type">binary</span>、 <span class="type">varbinary</span>(二进制文本)</span><br><span class="line">             enum (枚举，只能插入枚举里边的数据，不区分大小写)</span><br><span class="line">                 例： <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test(type1 ENUM(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>));</span><br><span class="line">                     <span class="keyword">INSERT</span> <span class="keyword">INTO</span> test <span class="keyword">VALUES</span>(<span class="string">&#x27;a&#x27;</span>),(<span class="string">&#x27;B&#x27;</span>),(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">                     <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test;</span><br><span class="line">             <span class="keyword">set</span>(集合，和 Enum类型类似，里面可以保存<span class="number">0</span>·<span class="number">64</span>个成员。区别是<span class="keyword">set</span>类型一次可以选取多个成员，而enum只能选一个，储存字节数和集合长度有关)</span><br><span class="line">                 例： <span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test2(type1 <span class="keyword">SET</span>(<span class="string">&#x27;a&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;c&#x27;</span>));</span><br><span class="line">                      <span class="keyword">INSERT</span> <span class="keyword">INTO</span> test2 <span class="keyword">VALUES</span>(<span class="string">&#x27;a&#x27;</span>),(<span class="string">&#x27;B,c&#x27;</span>),(<span class="string">&#x27;c&#x27;</span>);</span><br><span class="line">                      <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> test2;</span><br><span class="line">较长的文本</span><br><span class="line">    text</span><br><span class="line">    <span class="type">blob</span>（较大的二进制）</span><br></pre></td></tr></table></figure><h4 id="2-4-日期型"><a href="#2-4-日期型" class="headerlink" title="2.4.日期型"></a>2.4.日期型</h4><table><thead><tr><th align="center">类型</th><th align="center">字节</th><th align="center">最小值</th><th align="center">最大值</th></tr></thead><tbody><tr><td align="center">date</td><td align="center">4</td><td align="center">1000-01-01</td><td align="center">9999-12-31</td></tr><tr><td align="center">datetime</td><td align="center">8</td><td align="center">1000-01-01</td><td align="center">9999-12-31</td></tr><tr><td align="center">timestamp</td><td align="center">4</td><td align="center">197000101080001</td><td align="center">2038年的某个时刻</td></tr><tr><td align="center">time</td><td align="center">3</td><td align="center">-838：59：59</td><td align="center">838：59：59</td></tr><tr><td align="center">year</td><td align="center">1</td><td align="center">1901</td><td align="center">2155</td></tr></tbody></table><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>、 <span class="type">timestamp</span>时间范围较小</span><br><span class="line"><span class="number">2</span>、 <span class="type">timestamp</span>和实际时区有关,更能反映实际的日期，而 datetime则只能反映出插入时的当地时区</span><br><span class="line"><span class="number">3</span>、 <span class="type">timestamp</span>的属性变Mysql版本和SQLMode的影响很大</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 举例</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test(</span><br><span class="line">    type1 DATETIME,</span><br><span class="line">    type2 <span class="type">TIMESTAMP</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test <span class="keyword">VALUES</span> (NOW(),NOW()); </span><br><span class="line"><span class="comment">-- 显示时区</span></span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> <span class="string">&#x27;time_zone&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 修改时区(东九区）</span></span><br><span class="line"><span class="keyword">SET</span> time_zone <span class="operator">=</span> <span class="string">&#x27;+9:00&#x27;</span>;</span><br><span class="line"><span class="comment">-- 说明timestamp受时区影响</span></span><br></pre></td></tr></table></figure><h3 id="3-常见约束"><a href="#3-常见约束" class="headerlink" title="3.常见约束"></a>3.常见约束</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">含义：用来限制表中的数据，为了保证表中的数据的准确和可靠性</span><br><span class="line">分类：六大约束 </span><br><span class="line">    <span class="keyword">NOT</span> <span class="keyword">NULL</span>：非空，用于保证该字段的值不能为空</span><br><span class="line">    <span class="keyword">DEFAULT</span>:默认，用于保证该字段有默认值</span><br><span class="line">    <span class="keyword">PRIMARY</span> KRY:主键，用于保证该字段的值具有唯一性，并且非空</span><br><span class="line">    <span class="keyword">UNIQUE</span>：用于保证该字段的值具有唯一性，可以为空</span><br><span class="line">    <span class="keyword">CHECK</span>:检查约束【mysql中不支持】</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY:外键，用于限制两个表的关系，用于保证该字段的值必须来自与主表的关联列的值</span><br><span class="line">时机：</span><br><span class="line">    <span class="number">1.</span>创建表时</span><br><span class="line">    <span class="number">2.</span>修改表时</span><br><span class="line">分类：</span><br><span class="line">    列级约束</span><br><span class="line">        六大约束语法都支持，但外键约束没有效果</span><br><span class="line">    表级约束</span><br><span class="line">        除了非空、默认，其他都支持</span><br></pre></td></tr></table></figure><h4 id="3-1-创建表时添加约束"><a href="#3-1-创建表时添加约束" class="headerlink" title="3.1 .创建表时添加约束"></a>3.1 .创建表时添加约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test(</span><br><span class="line">    列名 类型 列级约束,</span><br><span class="line">    列名 类型 列级约束,</span><br><span class="line">    表级约束</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">列级约束</span></span><br><span class="line"><span class="comment">    直接在字段名和类型后面追加约束类型即可</span></span><br><span class="line"><span class="comment">    只支持：默认、非空、主键、唯一</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 主表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> major(</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    majorName <span class="type">VARCHAR</span>(<span class="number">20</span>) </span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 从表</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    stuName <span class="type">VARCHAR</span>(<span class="number">20</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,</span><br><span class="line">    gender <span class="type">CHAR</span>(<span class="number">1</span>) <span class="keyword">CHECK</span>(gender <span class="operator">=</span> <span class="string">&#x27;男&#x27;</span><span class="keyword">OR</span> gender<span class="operator">=</span><span class="string">&#x27;女&#x27;</span>),</span><br><span class="line">    seat <span class="type">INT</span> <span class="keyword">UNIQUE</span>,</span><br><span class="line">    age <span class="type">INT</span> <span class="keyword">DEFAULT</span> <span class="number">18</span>,</span><br><span class="line">    majorId <span class="type">INT</span> ,</span><br><span class="line">    <span class="keyword">CONSTRAINT</span> foreignkey <span class="keyword">FOREIGN</span> KEY(majorId) <span class="keyword">REFERENCES</span> major(id)</span><br><span class="line">    );</span><br><span class="line"><span class="comment">-- 查询表结构</span></span><br><span class="line"><span class="keyword">DESC</span> stuinfo;</span><br><span class="line"><span class="comment">-- 查询表索引</span></span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> stuinfo;</span><br><span class="line"><span class="keyword">SHOW</span> INDEX <span class="keyword">FROM</span> major;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">表级约束</span></span><br><span class="line"><span class="comment">    在各字段的最下面</span></span><br><span class="line"><span class="comment">    【constraint 约束名】 约束类型（字段名）</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> stuinfo(</span><br><span class="line">    id <span class="type">INT</span> ,</span><br><span class="line">    stuName <span class="type">VARCHAR</span>(<span class="number">20</span>),</span><br><span class="line">    gender <span class="type">CHAR</span>(<span class="number">1</span>) ,</span><br><span class="line">    seat <span class="type">INT</span> ,</span><br><span class="line">    age <span class="type">INT</span> ,</span><br><span class="line">    majorId <span class="type">INT</span>,</span><br><span class="line"><span class="comment">/*** constraint 约束名 约束类型 （字段名）</span></span><br><span class="line"><span class="comment">    CONSTRAINT pk PRIMARY KEY (id),</span></span><br><span class="line"><span class="comment">    CONSTRAINT ch CHECK (gender = &#x27;男&#x27;OR gender=&#x27;女&#x27;),</span></span><br><span class="line"><span class="comment">    CONSTRAINT se UNIQUE (seat),</span></span><br><span class="line"><span class="comment">    CONSTRAINT foreignkey FOREIGN KEY(majorId) REFERENCES major(id)</span></span><br><span class="line"><span class="comment">);</span></span><br></pre></td></tr></table></figure><pre><code>主键和唯一的对比
主键：保证唯一性，不允许为空，一个表中只能有一个（可以是多个列组合）
唯一：保证唯一性，允许为空，一个表中可以有多个（可以是多个列组合）
外键：
    1.要求在从表设置外键关系
    2.从表的外键列的类型和主表的关联列的类型要求一致或兼容，名称无所谓
    3.主表的关联列必须是一个key(一般是主键或唯一)
</code></pre><h4 id="3-2-修改表时添加约束"><a href="#3-2-修改表时添加约束" class="headerlink" title="3.2.修改表时添加约束"></a>3.2.修改表时添加约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列级约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY <span class="keyword">COLUMN</span> 列名 类型 约束;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY;</span><br><span class="line"><span class="comment">-- 表级约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">ADD</span> 约束 (列名);</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">ADD</span> <span class="keyword">FOREIGN</span> KEY (majorId) <span class="keyword">REFERENCES</span> major(id);</span><br></pre></td></tr></table></figure><h4 id="3-3-修改表时删除约束"><a href="#3-3-修改表时删除约束" class="headerlink" title="3.3.修改表时删除约束"></a>3.3.修改表时删除约束</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 列级约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 MODIFY <span class="keyword">COLUMN</span> 列名 类型;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo MODIFY <span class="keyword">COLUMN</span> id <span class="type">INT</span>;</span><br><span class="line"><span class="comment">-- 表级约束</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> 表名 <span class="keyword">DROP</span> INDEX 约束名;</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY; <span class="comment">-- 主键就一个，所以不用写名</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> stuinfo <span class="keyword">DROP</span> <span class="keyword">FOREIGN</span> KEY foreignkey;</span><br></pre></td></tr></table></figure><h4 id="3-4-标识列-auto-increment"><a href="#3-4-标识列-auto-increment" class="headerlink" title="3.4.标识列(auto_increment)"></a>3.4.标识列(auto_increment)</h4><pre><code><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">标识列又为自增长列.</span><br><span class="line">​    含义：</span><br><span class="line">​        可以不用手动的插入值，系统提供默认的序列值</span><br><span class="line">​    特点：</span><br><span class="line">​        1、标识列必须和主键搭配吗?</span><br><span class="line">​            不一定，但要求是一个key</span><br><span class="line">​        2、一个表可以有几个标识列?</span><br><span class="line">​            至多一个!</span><br><span class="line">​        3、标识列的类型只能是数值型</span><br><span class="line">​        4、标识列可以通过auto_increment_increment设置步长，</span><br><span class="line">​          初始值可以在插入值的时候定义</span><br></pre></td></tr></table></figure>
</code></pre><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> test (</span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY AUTO_INCREMENT,</span><br><span class="line">    NAME <span class="type">VARCHAR</span>(<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> test <span class="keyword">VALUES</span>(<span class="keyword">NULL</span>,<span class="string">&#x27;john&#x27;</span>);</span><br><span class="line"><span class="comment">-- 查看自增长项</span></span><br><span class="line"><span class="keyword">SHOW</span> VARIABLES <span class="keyword">LIKE</span> &quot;%auto_increment%&quot;;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Variable_name             Value   </span></span><br><span class="line"><span class="comment">    ------------------------  --------</span></span><br><span class="line"><span class="comment">    auto_increment_increment  1       步长</span></span><br><span class="line"><span class="comment">    auto_increment_offset     1       初始值</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">-- 修改步长</span></span><br><span class="line"><span class="keyword">SET</span> auto_increment_increment <span class="operator">=</span> <span class="number">3</span>;</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Variable_name             Value   </span></span><br><span class="line"><span class="comment">    ------------------------  --------</span></span><br><span class="line"><span class="comment">    auto_increment_increment  3       </span></span><br><span class="line"><span class="comment">    auto_increment_offset     1 </span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/9e77971c/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/9e77971c/" class="post-title-link" itemprop="url">MySQL:DML（数据操作语言）</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:30:55" itemprop="dateCreated datePublished" datetime="2022-03-12T15:30:55+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2.2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h3 id="DML语言"><a href="#DML语言" class="headerlink" title="DML语言"></a>DML语言</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">数据操作语言:</span><br><span class="line">    插入: insert</span><br><span class="line">    修改: update</span><br><span class="line">    删除: delete</span><br></pre></td></tr></table></figure><h3 id="1-插入语句"><a href="#1-插入语句" class="headerlink" title="1. 插入语句"></a>1. 插入语句</h3><h4 id="1-1-语法"><a href="#1-1-语法" class="headerlink" title="1. 1 语法"></a>1. 1 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 语法一:</span><br><span class="line">insert into 表名(列名，... ) values (值1,...);</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">-- 语法二:</span><br><span class="line">insert into 表名 set 列名 = 值,列名 = 值,....;</span><br></pre></td></tr></table></figure><h4 id="1-2-用例"><a href="#1-2-用例" class="headerlink" title="1. 2 用例"></a>1. 2 用例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.插入的值的类型要与列的类型一致或兼容</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> boys(id,boyName,userCP)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">20</span>,<span class="string">&#x27;小懒虫&#x27;</span>,<span class="number">99</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2.不可以为null的列必须插入值。可以为null的列如何插入值?</span></span><br><span class="line">      要么列名和值都省略，要么列名写着，值为<span class="keyword">null</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> boys(id,boyName)</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">VALUES</span>(<span class="number">21</span>,<span class="string">&#x27;大懒虫&#x27;</span>);</span><br><span class="line"><span class="comment">-- 3.列的顺序可以调换</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(NAME,sex,id, phone)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;蒋欣&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">16</span>,<span class="string">&#x27;10&#x27;</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4.列数和值的个数必须一致</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty(NAME,sex, id, phone, boyfriend_id)</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="string">&#x27;关晓彤&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="number">17</span>,<span class="string">&#x27;110&#x27;</span> );</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5.可以省略列名,默认所有列,而且列的顺序和表中列的顺序一致</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> boys</span><br><span class="line"><span class="keyword">VALUES</span>(<span class="number">22</span>,<span class="string">&#x27;小懒虫&#x27;</span>,<span class="number">99</span>);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> boys</span><br><span class="line"><span class="keyword">set</span> id<span class="operator">=</span><span class="number">24</span>,boyName<span class="operator">=</span><span class="string">&#x27;小懒虫&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="1-3-方式比较"><a href="#1-3-方式比较" class="headerlink" title="1.3. 方式比较"></a>1.3. 方式比较</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.方式一支持插入多行,方式二不支持</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty</span><br><span class="line"><span class="keyword">VALUES</span></span><br><span class="line">(<span class="number">23</span>,<span class="string">&#x27;唐艺昕&#x27;</span>,<span class="string">&#x27;女&#x27;</span>，<span class="string">&#x27;1990-4-23&#x27;</span>,<span class="string">&#x27;1898888&#x27;</span> ,<span class="keyword">NULL</span>,<span class="number">2</span>),</span><br><span class="line">(<span class="number">24</span>,<span class="string">&#x27;唐艺昕2&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1990-4-21&#x27;</span>,<span class="string">&#x27;1898888888&#x27;</span>, <span class="keyword">NULL</span>, <span class="number">2</span>),</span><br><span class="line">(<span class="number">25</span>,<span class="string">&#x27;唐艺昕3&#x27;</span>,<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1990-4-20&#x27;</span> ,<span class="string">&#x27;1898888888&#x27;</span>,<span class="keyword">NULL</span>,<span class="number">2</span>) ;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2、方式—支持子查询,方式二不支持</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> beauty (id,NANE, phone)</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="number">26</span>,<span class="string">&#x27;宋茜&#x27;</span>,<span class="string">&#x27;1889866&#x27;</span>;</span><br></pre></td></tr></table></figure><h3 id="2-修改语句"><a href="#2-修改语句" class="headerlink" title="2.修改语句"></a>2.修改语句</h3><h4 id="2-1-语法"><a href="#2-1-语法" class="headerlink" title="2. 1 语法"></a>2. 1 语法</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span>修改单表的记录★</span><br><span class="line"></span><br><span class="line">    语法:</span><br><span class="line">    update 表名</span><br><span class="line">    <span class="keyword">set</span> 列<span class="operator">=</span>新值,列<span class="operator">=</span>新值,...</span><br><span class="line">    <span class="keyword">where</span> 筛选条件;</span><br><span class="line"><span class="number">2.</span>修改多表的记录【补充】</span><br><span class="line"></span><br><span class="line">    语法:</span><br><span class="line">    sql92语法:</span><br><span class="line">        update 表<span class="number">1</span> 别名,表<span class="number">2</span> 别名</span><br><span class="line">        <span class="keyword">set</span> 列<span class="operator">=</span>值,...</span><br><span class="line">        <span class="keyword">where</span> 连接条件</span><br><span class="line">        <span class="keyword">and</span> 筛选条件;</span><br><span class="line">    sql99语法:</span><br><span class="line">        update 表<span class="number">1</span> 别名</span><br><span class="line">        <span class="keyword">inner</span><span class="operator">|</span><span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名 </span><br><span class="line">        <span class="keyword">on</span> 连接条件</span><br><span class="line">        <span class="keyword">set</span> 列<span class="operator">=</span>值,...</span><br><span class="line">        <span class="keyword">where</span> 筛选条件;</span><br></pre></td></tr></table></figure><h4 id="2-2-用例"><a href="#2-2-用例" class="headerlink" title="2. 2 用例"></a>2. 2 用例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 修改没有男朋友的女神的男朋友编号都为2号</span></span><br><span class="line">UPDATE beauty</span><br><span class="line"><span class="keyword">SET</span> boyfriend_id<span class="operator">=</span><span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> boyfriend_id <span class="keyword">NOT</span> <span class="keyword">IN</span>(</span><br><span class="line">    <span class="keyword">SELECT</span> id</span><br><span class="line">    <span class="keyword">FROM</span> boys)</span><br><span class="line"><span class="keyword">AND</span> boyfriend_id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br><span class="line"></span><br><span class="line">UPDATE beauty be</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> boys bo</span><br><span class="line"><span class="keyword">ON</span> be.boyfriend_id <span class="operator">=</span> bo.id</span><br><span class="line"><span class="keyword">SET</span> boyfriend_id <span class="operator">=</span> <span class="number">2</span></span><br><span class="line"><span class="keyword">WHERE</span> bo.id <span class="keyword">IS</span> <span class="keyword">NULL</span>;</span><br></pre></td></tr></table></figure><h3 id="3-删除语句"><a href="#3-删除语句" class="headerlink" title="3. 删除语句"></a>3. 删除语句</h3><h4 id="3-1-语法"><a href="#3-1-语法" class="headerlink" title="3. 1 语法"></a>3. 1 语法</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">方式一: delete</span><br><span class="line">​    语法:</span><br><span class="line">​    1、单表的删除【★】</span><br><span class="line">​        delete from 表名 where 筛选条件 【limit 条目数】</span><br><span class="line">​    2、多表的删除</span><br><span class="line">​        sql92语法:</span><br><span class="line">​            delete 表1的别名,表2的别名</span><br><span class="line">​            from 表1 别名,表2 别名</span><br><span class="line">​            where 连接条件</span><br><span class="line">​            and 筛选条件;</span><br><span class="line">​        sql99语法:</span><br><span class="line">​            delete 表1的别名,表2的别名</span><br><span class="line">​            from 表1 别名</span><br><span class="line">​            inner | left | right join 表2 别名 </span><br><span class="line">​            on 连接条件</span><br><span class="line">​            where 筛选条件</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">方式二: truncate</span><br><span class="line">语法:</span><br><span class="line">    truncate table 表名;</span><br><span class="line">    -- truncate语句,不允许删除添加条件，表示清空删除</span><br></pre></td></tr></table></figure><h4 id="3-2-用例"><a href="#3-2-用例" class="headerlink" title="3. 2 用例"></a>3. 2 用例</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除手机号以9结尾的女神信息</span></span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> beauty </span><br><span class="line"><span class="keyword">WHERE</span> phone <span class="keyword">LIKE</span> <span class="string">&#x27;%9&#x27;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 删除张无忌的女朋友的信息</span></span><br><span class="line"><span class="keyword">DELETE</span> be</span><br><span class="line"><span class="keyword">FROM</span> beauty be</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> boys bo</span><br><span class="line"><span class="keyword">ON</span> be.boyfriend_id <span class="operator">=</span> bo.id</span><br><span class="line"><span class="keyword">WHERE</span> bo.boyName <span class="operator">=</span> <span class="string">&#x27;张无忌&#x27;</span>;</span><br></pre></td></tr></table></figure><h4 id="3-3-delete和truncate比较"><a href="#3-3-delete和truncate比较" class="headerlink" title="3.3 delete和truncate比较"></a>3.3 delete和truncate比较</h4><pre><code>1.delete可以加where条件，truncate不能加。
2.truncate删除，效率高一丢丢。
3.假如要删除的表中有自增长列，如果用delete删除后，再插入数据，自增长列的值从断点开始,而truncate删除后，再插入数据，自增长列的值从1开始。   
4.truncate删除没有返回值，delete删除有返回值。
5.truncate删除不能回滚，delete删除可以回滚。
</code></pre></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/2080b578/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/2080b578/" class="post-title-link" itemprop="url">MySQL:联合查询</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:29:29" itemprop="dateCreated datePublished" datetime="2022-03-12T15:29:29+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>626</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>1 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><h3 id="1-语法"><a href="#1-语法" class="headerlink" title="1. 语法"></a>1. 语法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">union 联合合并：将多条查询语句的结果合并成一个结果</span><br><span class="line">    语法：</span><br><span class="line">        查询语句一</span><br><span class="line">        union</span><br><span class="line">        查询语句二</span><br><span class="line">        union</span><br><span class="line">        查询语句三</span><br><span class="line">        ……</span><br><span class="line">    应用场景:</span><br><span class="line">        要查询的结果来自于多个表，且多个表没有直接的连接关系，但查询的信息一致时</span><br><span class="line">    特点:</span><br><span class="line">        1、要求多条查询语句的查询列数是一致的!</span><br><span class="line">        2、要求多条查询语句的查询的每一列的类型和顺序最好一致</span><br><span class="line">        3、union关键字默认去重，如果使用union all 可以包含重复项</span><br></pre></td></tr></table></figure><h3 id="2-用例"><a href="#2-用例" class="headerlink" title="2. 用例"></a>2. 用例</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span></span><br><span class="line"><span class="keyword">OR</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br><span class="line"><span class="comment">/****等价于***/</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> email <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> last_name <span class="keyword">LIKE</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询girl中的所有人名</span></span><br><span class="line"><span class="keyword">SELECT</span>  `name`</span><br><span class="line"><span class="keyword">FROM</span> beauty</span><br><span class="line"><span class="keyword">UNION</span></span><br><span class="line"><span class="keyword">SELECT</span> boyName</span><br><span class="line"><span class="keyword">FROM</span> boys;</span><br></pre></td></tr></table></figure><h3 id="3-查询总结"><a href="#3-查询总结" class="headerlink" title="3. 查询总结"></a>3. 查询总结</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> 查询列表</span><br><span class="line"><span class="keyword">FROM</span> 表名 别名</span><br><span class="line">连接类型（<span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span><span class="operator">|</span><span class="keyword">inner</span>）<span class="keyword">JOIN</span> 表名 别名</span><br><span class="line"><span class="keyword">ON</span> 连接条件</span><br><span class="line"><span class="keyword">WHERE</span> 筛选条件</span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> 分组列表</span><br><span class="line"><span class="keyword">HAVING</span> 筛选条件</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> 排序列表 <span class="keyword">DESC</span><span class="operator">|</span><span class="keyword">ASC</span></span><br><span class="line">LIMIT 起始条目索引，条目数</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><div class="post-block"><article itemscope itemtype="http://schema.org/Article" class="post-content"><link itemprop="mainEntityOfPage" href="https://www.mykebaby.com/posts/80debfa3/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/uploads/avatar.jpg"><meta itemprop="name" content="小懒虫"><meta itemprop="description" content="Later Is Never"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="半日浮生"></span><header class="post-header"><h2 class="post-title" itemprop="name headline"><a href="/posts/80debfa3/" class="post-title-link" itemprop="url">MySQL:分页查询</a></h2><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2022-03-12 15:29:15" itemprop="dateCreated datePublished" datetime="2022-03-12T15:29:15+08:00">2022-03-12</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2022-03-14 11:29:02" itemprop="dateModified" datetime="2022-03-14T11:29:02+08:00">2022-03-14</time> </span><span class="post-meta-break"></span> <span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>2k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>2 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><span id="more"></span><p>应用场景:当要显示的数据，一页显示不全，需要分页提交sql请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">语法:</span><br><span class="line">     select 查询列表</span><br><span class="line">     from 表</span><br><span class="line">     【[JOIN TYPE] join 表2</span><br><span class="line">     on 连接条件</span><br><span class="line">     WHERE 筛选条件 </span><br><span class="line">     group by 分组字段 </span><br><span class="line">     having 分组后的筛选</span><br><span class="line">     order by 排序的字段】</span><br><span class="line">     limit offset, size;</span><br><span class="line">    /***offset 要显示条目的起始索引(起始索引从0开始)***/</span><br><span class="line">特点:</span><br><span class="line">     limit 语句放在查询语句的最后</span><br><span class="line">公式:</span><br><span class="line">     select 查询列表</span><br><span class="line">     from 表</span><br><span class="line">     limit (page-1)*size,size;</span><br><span class="line">     /***要显示的页数page，每页的条目数size***/</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询前五条员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">0</span>,<span class="number">5</span>  ;<span class="comment">/***从第0个开始，一共显示5条***/</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 查询第11条到第25条员工信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line">LIMIT <span class="number">10</span>,<span class="number">15</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 有奖金的员工信息，并且工资较高的前10名显示出来</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> commission_pct <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> salary <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">10</span>;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 1.查询工资最低的员工信息:1ast_name,salary</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,salary</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> salary <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 2-查询平均工资最低的部门信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> `departments`</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> department_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">ASC</span></span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 3．查询平均工资最低的部门信息和该部门的平均工资</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>,avg_data.avg_salary</span><br><span class="line"><span class="keyword">FROM</span> `departments` d</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> department_id,<span class="built_in">AVG</span>(salary) avg_salary</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">ASC</span></span><br><span class="line">    LIMIT <span class="number">1</span>) avg_data</span><br><span class="line"><span class="keyword">ON</span> d.department_id <span class="operator">=</span> avg_data.department_id;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 4.查询平均工资最高的jobs信息</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> jobs</span><br><span class="line"><span class="keyword">WHERE</span> job_id <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> job_id </span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> job_id </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 5．查询平均工资高于公司平均工资的部门有哪些?</span></span><br><span class="line"><span class="keyword">SELECT</span> department_name</span><br><span class="line"><span class="keyword">FROM</span> departments d</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary) avg_salary,department_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">    <span class="keyword">HAVING</span> avg_salary<span class="operator">&gt;</span>(</span><br><span class="line">        <span class="keyword">SELECT</span> <span class="built_in">AVG</span>(salary)</span><br><span class="line">        <span class="keyword">FROM</span> employees)</span><br><span class="line">    ) em_sa</span><br><span class="line"><span class="keyword">ON</span> em_sa.department_id  <span class="operator">=</span> d.department_id;</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 6。查询出公司中所有manager的详细信息-</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> employee_id <span class="keyword">IN</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> manager_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">WHERE</span> manager_id <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 7．各个部门中最高工资中最低的那个部门的最低工资是多少</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(salary)</span><br><span class="line"><span class="keyword">FROM</span> employees</span><br><span class="line"><span class="keyword">WHERE</span> department_id <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> department_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id </span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">MAX</span>(salary)</span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 8，查询平均工资最高的部门的manager的详细信息: last_name，department_id, email, salary</span></span><br><span class="line"><span class="keyword">SELECT</span> last_name,e.department_id, email, salary</span><br><span class="line"><span class="keyword">FROM</span> employees e</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> departments d</span><br><span class="line"><span class="keyword">ON</span> e.employee_id <span class="operator">=</span> d.manager_id</span><br><span class="line"><span class="keyword">WHERE</span> d.department_id <span class="operator">=</span> (</span><br><span class="line">    <span class="keyword">SELECT</span> department_id</span><br><span class="line">    <span class="keyword">FROM</span> employees</span><br><span class="line">    <span class="keyword">GROUP</span> <span class="keyword">BY</span> department_id</span><br><span class="line">    <span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="built_in">AVG</span>(salary) <span class="keyword">DESC</span></span><br><span class="line">    LIMIT <span class="number">1</span></span><br><span class="line">);</span><br></pre></td></tr></table></figure></div><footer class="post-footer"><div class="post-eof"></div></footer></article></div><nav class="pagination"><span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a></nav></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; 2021-11 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">小懒虫</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span>站点总字数：</span> <span title="站点总字数">74k</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span>站点阅读时长 &asymp;</span> <span title="站点阅读时长">1:08</span></span></div><div class="busuanzi-count"><span class="post-meta-item" id="busuanzi_container_site_uv"><span class="post-meta-item-icon"><i class="fa fa-user"></i> </span><span class="site-uv" title="总访客量"><span id="busuanzi_value_site_uv"></span> </span></span><span class="post-meta-item" id="busuanzi_container_site_pv"><span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="site-pv" title="总访问量"><span id="busuanzi_value_site_pv"></span></span></span></div></div></footer><script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@next-theme/pjax@0.5.0/pjax.min.js" integrity="sha256-3NkoLDrmHLTYj7csHIZSr0MHAFTXth7Ua/DDt4MRUAg=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script><script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/bookmark.js"></script><script src="/js/pjax.js"></script><script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script><script src="/js/third-party/search/local-search.js"></script><script src="/js/third-party/fancybox.js"></script><script src="/js/third-party/pace.js"></script><script data-pjax async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="/js/third-party/comments/livere.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",model:{jsonPath:"/live2dw/assets/wanko.model.json"},display:{position:"right",width:120,height:240},mobile:{show:!0},react:{opacityDefault:1,opacityOnHover:1},log:!1,tagMode:!1})</script></body></html>