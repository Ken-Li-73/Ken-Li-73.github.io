<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>新的开始</title>
    <url>/posts/b7d5754b/</url>
    <content><![CDATA[<p>弄了一天，终于搭建了一个看的过去的框架，感觉有好多心得要写，却又不知道从何下手。</p>
<ul>
<li><p>慢慢美化自己的博客</p>
</li>
<li><p>慢慢做自己的心得体会</p>
</li>
<li><p>慢慢成长</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">while</span>(alive)&#123;</span><br><span class="line">    sleep();</span><br><span class="line">    eat();</span><br><span class="line">    code();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>-心得</category>
      </categories>
      <tags>
        <tag>-心得</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化：页面美化</title>
    <url>/posts/f837761/</url>
    <content><![CDATA[<p>​    博客搭建完成后需要做一些美化，下面是我在网上搜集并亲手试验过的一些美化功能。</p>
<span id="more"></span>

<h3 id="添加动态粒子背景：canvas-nest"><a href="#添加动态粒子背景：canvas-nest" class="headerlink" title="添加动态粒子背景：canvas nest"></a>添加动态粒子背景：canvas nest</h3><p>站点根目录打开Git Bash</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-canvas-nest <span class="built_in">source</span>/lib/canvas-nest</span><br></pre></td></tr></table></figure>

<p>打开主题配置文件即<code>/themes/next</code>下的<code>_config.yml</code>，新版本可能没有canvas-nest，那将下面的代码找一个地方粘贴，我喜欢复制在<code>#canvas-ribbon</code>上面）</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Canvas-nest</span></span><br><span class="line"><span class="comment"># Dependencies: https://github.com/theme-next/theme-next-canvas-nest</span></span><br><span class="line"><span class="comment"># For more information: https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line"><span class="attr">canvas_nest:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">onmobile:</span> <span class="literal">true</span> <span class="comment"># Display on mobile or not</span></span><br><span class="line">  <span class="attr">color:</span> <span class="string">&quot;180, 240, 60&quot;</span> <span class="comment"># RGB values, use `,` to separate</span></span><br><span class="line">  <span class="attr">opacity:</span> <span class="number">0.6</span> <span class="comment"># The opacity of line: 0~1</span></span><br><span class="line">  <span class="attr">zIndex:</span> <span class="number">-1</span> <span class="comment"># z-index property of the background</span></span><br><span class="line">  <span class="attr">count:</span> <span class="number">99</span> <span class="comment"># The number of lines</span></span><br></pre></td></tr></table></figure>

<p><img src="/posts/f837761/canvas_1.jpg"></p>
<h3 id="设置背景图片"><a href="#设置背景图片" class="headerlink" title="设置背景图片"></a>设置背景图片</h3><p>打开主题配置文件即<code>/themes/next</code>下的<code>_config.yml</code>，将 <code>style: source/_data/styles.styl</code> 取消注释：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">custom_file_path:</span></span><br><span class="line">  <span class="attr">style:</span> <span class="string">source/_data/styles.styl</span></span><br></pre></td></tr></table></figure>

<p>打开根目录<code>/source</code>创建文件<code>_data/styles.styl</code>，添加以下内容：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-tag">body</span> &#123;</span><br><span class="line">      <span class="attribute">background</span>: url(/images/background.png);<span class="comment">//图片地址</span></span><br><span class="line">      <span class="attribute">background-size</span>: cover;</span><br><span class="line">      <span class="attribute">background-repeat</span>: no-repeat;</span><br><span class="line">      <span class="attribute">background-attachment</span>: fixed;</span><br><span class="line">      <span class="attribute">background-position</span>: <span class="number">50%</span> <span class="number">50%</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加文章阴影效果"><a href="#添加文章阴影效果" class="headerlink" title="添加文章阴影效果"></a>添加文章阴影效果</h3><p>打开<code>/source/_data/style.styl</code>文件，添加以下代码：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.post</span> &#123;</span><br><span class="line">   <span class="attribute">margin-top</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">margin-bottom</span>: <span class="number">60px</span>;</span><br><span class="line">   <span class="attribute">padding</span>: <span class="number">25px</span>;</span><br><span class="line">   -webkit-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">202</span>, <span class="number">203</span>, <span class="number">203</span>, .<span class="number">5</span>);</span><br><span class="line">   -moz-<span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">5px</span> rgba(<span class="number">202</span>, <span class="number">203</span>, <span class="number">204</span>, .<span class="number">5</span>);</span><br></pre></td></tr></table></figure>

<h3 id="代码块样式自定义"><a href="#代码块样式自定义" class="headerlink" title="代码块样式自定义"></a>代码块样式自定义</h3><p>打开主题配置文件即<code>/themes/next</code>下的<code>_config.yml</code>，将 <code>style: source/_data/styles.styl</code> 取消注释。</p>
<p>打开<code>/source/_data/styles.styl</code>，添加以下代码：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// Custom styles.</span></span><br><span class="line"><span class="selector-tag">code</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#ff7600</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="number">#fbf7f8</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">2px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 大代码块的自定义样式</span></span><br><span class="line"><span class="selector-class">.highlight</span>, pre &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">5px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight</span>, <span class="selector-tag">code</span>, pre &#123;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#d6d6d6</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h3><p>打开主题配置文件即<code>/themes/next/_config.yml</code>，查找<code>avatar</code>，url后是图片的链接地址（本地图片放在<code>/themes/next/source/images</code>文件夹下）：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># Sidebar Avatar</span></span><br><span class="line"><span class="attr">avatar:</span></span><br><span class="line">  <span class="comment"># Replace the default image and set the url here.</span></span><br><span class="line">  <span class="attr">url:</span> <span class="string">/images/avatar.gif</span>   <span class="comment">#图片的位置http://xxx.com/avatar.png</span></span><br><span class="line">  <span class="comment"># If true, the avatar will be dispalyed in circle.</span></span><br><span class="line">  <span class="attr">rounded:</span> <span class="literal">true</span>   </span><br><span class="line">  <span class="comment"># If true, the avatar will be rotated with the cursor.</span></span><br><span class="line">  <span class="attr">rotated:</span> <span class="literal">false</span>  </span><br></pre></td></tr></table></figure>

<h3 id="页面透明化"><a href="#页面透明化" class="headerlink" title="页面透明化"></a>页面透明化</h3><p>打开主题配置文件即<code>/themes/next</code>下的<code>_config.yml</code>，将 <code>style: source/_data/styles.styl</code> 取消注释。</p>
<p>打开<code>/source/_data/styles.styl</code>，添加以下代码：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.content-wrap</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.post-block</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.7</span>) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//侧边框的透明度设置</span></span><br><span class="line"><span class="selector-class">.sidebar-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.7</span>) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//菜单栏的透明度设置</span></span><br><span class="line"><span class="selector-class">.header-inner</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.8</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//搜索框（local-search）的透明度设置</span></span><br><span class="line"><span class="selector-class">.popup</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0.8</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//评论区透明度</span></span><br><span class="line"><span class="selector-class">.comments</span> &#123;</span><br><span class="line">	<span class="attribute">background</span>: rgba(<span class="number">255</span>,<span class="number">255</span>,<span class="number">255</span>,<span class="number">0.7</span>) none repeat scroll <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="圆角设置"><a href="#圆角设置" class="headerlink" title="圆角设置"></a>圆角设置</h3><p>打开<code>/source/_data/variable.styl</code>，添加以下代码：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="comment">// 圆角设置</span></span><br><span class="line"><span class="variable">$border</span>-radius-inner     = <span class="number">30px</span> <span class="number">30px</span> <span class="number">30px</span> <span class="number">30px</span>;</span><br><span class="line"><span class="variable">$border</span>-radius           = <span class="number">30px</span>;</span><br></pre></td></tr></table></figure>

<h3 id="外部链接优化"><a href="#外部链接优化" class="headerlink" title="外部链接优化"></a>外部链接优化</h3><p>减少外部链接可以提高网站的安全性和SEO。</p>
<p>安装 hexo-filter-nofollow 插件：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-filter-nofollow --save</span><br></pre></td></tr></table></figure>

<p>打开<code>/_config.yml</code>添加如下代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">#Nofollow</span></span><br><span class="line">nofollow:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span>   <span class="comment">#启用插件</span></span><br><span class="line">  field: site     <span class="comment">#post 处理文章内容，post 处理全站所有文件</span></span><br><span class="line">  exclude:      <span class="comment">#白名单(比如友链)</span></span><br><span class="line">    - <span class="string">&#x27;exclude1.com&#x27;</span></span><br><span class="line">    - <span class="string">&#x27;exclude2.com&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="添加宠物"><a href="#添加宠物" class="headerlink" title="添加宠物"></a>添加宠物</h3><p>在根目录打开<code>Git Bash</code>，输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-helper-live2d --save</span><br><span class="line">npm install live2d-widget-model-tororo</span><br></pre></td></tr></table></figure>

<p>模型还有很多种：<a href="https://github.com/xiazeyu/live2d-widget-models/blob/master/README.md">live2d-widget-models</a>，我比较喜欢<code>tororo</code></p>
<p>打开<code>/_config.yml</code>添加如下代码：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">live2d:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">scriptFrom:</span> <span class="string">local</span></span><br><span class="line">  <span class="attr">pluginRootPath:</span> <span class="string">live2dw/</span></span><br><span class="line">  <span class="attr">pluginJsPath:</span> <span class="string">lib/</span></span><br><span class="line">  <span class="attr">pluginModelPath:</span> <span class="string">assets/</span></span><br><span class="line">  <span class="attr">model:</span></span><br><span class="line">    <span class="attr">use:</span> <span class="string">live2d-widget-model-tororo</span>	<span class="comment">#你的模型</span></span><br><span class="line">  <span class="attr">display:</span></span><br><span class="line">    <span class="comment"># 设置模型的位置</span></span><br><span class="line">    <span class="attr">position:</span> <span class="string">right</span></span><br><span class="line">    <span class="attr">width:</span> <span class="number">120</span></span><br><span class="line">    <span class="attr">height:</span> <span class="number">240</span></span><br><span class="line">  <span class="attr">mobile:</span></span><br><span class="line">    <span class="attr">show:</span> <span class="literal">false</span></span><br><span class="line">  <span class="attr">react:</span></span><br><span class="line">    <span class="attr">opacityDefault:</span> <span class="number">1</span></span><br><span class="line">    <span class="attr">opacityOnHover:</span> <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h3 id="页面静态压缩"><a href="#页面静态压缩" class="headerlink" title="页面静态压缩"></a>页面静态压缩</h3><p>在根目录打开<code>Git Bash</code>，输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-neat --save</span><br></pre></td></tr></table></figure>

<p>打开<code>/_config.yml</code>添加如下代码：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># hexo-neat</span></span><br><span class="line"><span class="comment"># 博文压缩</span></span><br><span class="line"><span class="attr">neat_enable:</span> <span class="literal">true</span></span><br><span class="line"><span class="comment"># 压缩html</span></span><br><span class="line"><span class="attr">neat_html:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line"><span class="comment"># 压缩css</span></span><br><span class="line"><span class="attr">neat_css:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.min.css&#x27;</span></span><br><span class="line"><span class="comment"># 压缩js</span></span><br><span class="line"><span class="attr">neat_js:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">mangle:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">output:</span></span><br><span class="line">  <span class="attr">compress:</span></span><br><span class="line">  <span class="attr">exclude:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/*.min.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/jquery.fancybox.pack.js&#x27;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">&#x27;**/index.js&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="代码复制按钮"><a href="#代码复制按钮" class="headerlink" title="代码复制按钮"></a>代码复制按钮</h3><p>打开主题配置文件即<code>/themes/next/_config.yml</code>，查找<code>copy_button</code>，修改如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">copy_button:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show text copy result.</span></span><br><span class="line">    <span class="attr">show_result:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="博客摘要"><a href="#博客摘要" class="headerlink" title="博客摘要"></a>博客摘要</h3><p>在想显示的内容后面添加</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">&lt;!--more--&gt;</span><br></pre></td></tr></table></figure>

<h3 id="文章版权信息"><a href="#文章版权信息" class="headerlink" title="文章版权信息"></a>文章版权信息</h3><p>打开主题配置文件即<code>/themes/next/_config.yml</code>，查找<code>creative_commons</code>，修改如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">creative_commons:</span></span><br><span class="line">  <span class="attr">license:</span> <span class="string">by-nc-sa</span></span><br><span class="line">  <span class="attr">sidebar:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="博客底部布局"><a href="#博客底部布局" class="headerlink" title="博客底部布局"></a>博客底部布局</h3><p>打开主题配置文件即<code>/themes/next/_config.yml</code>，查找<code>footer</code>,自定义修改：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">footer:</span></span><br><span class="line">  <span class="comment"># Specify the date when the site was setup. If not defined, current year will be used.</span></span><br><span class="line">  <span class="attr">since:</span> <span class="number">2021-11</span>  <span class="comment">#建站时间</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Icon between year and copyright info.</span></span><br><span class="line">  <span class="attr">icon:</span>       <span class="comment">#图标</span></span><br><span class="line">    <span class="comment"># Icon name in Font Awesome. See: https://fontawesome.com/icons</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">fa</span> <span class="string">fa-heart</span> </span><br><span class="line">    <span class="comment"># If you want to animate the icon, set it to true.</span></span><br><span class="line">    <span class="attr">animated:</span> <span class="literal">true</span>  </span><br><span class="line">    <span class="comment"># Change the color of icon, using Hex Code.</span></span><br><span class="line">    <span class="attr">color:</span> <span class="string">&quot;#ff0000&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># If not defined, `author` from Hexo `_config.yml` will be used.</span></span><br><span class="line">  <span class="attr">copyright:</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Powered by Hexo &amp; NexT</span></span><br><span class="line">  <span class="attr">powered:</span> <span class="literal">false</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Beian ICP and gongan information for Chinese users. See: https://beian.miit.gov.cn, http://www.beian.gov.cn</span></span><br><span class="line">  <span class="attr">beian:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">icp:</span></span><br><span class="line">    <span class="comment"># The digit in the num of gongan beian.</span></span><br><span class="line">    <span class="attr">gongan_id:</span></span><br><span class="line">    <span class="comment"># The full num of gongan beian.</span></span><br><span class="line">    <span class="attr">gongan_num:</span></span><br><span class="line">    <span class="comment"># The icon for gongan beian. See: http://www.beian.gov.cn/portal/download</span></span><br><span class="line">    <span class="attr">gongan_icon_url:</span></span><br></pre></td></tr></table></figure>

<h3 id="文章结束标志"><a href="#文章结束标志" class="headerlink" title="文章结束标志"></a>文章结束标志</h3><p>在<code>/themes/next/layout/_macro</code>中新建 <code>passage-end-tag.swig</code> 文件,并添加以下内容：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;text-align:center;color: #ccc;font-size:14px;&quot;</span>&gt;</span>-------------本文结束<span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-paw&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span>感谢您的阅读-------------<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>打开<code>/themes/next/layout/_macro/post.swig</code>文件，在<code>END POST BODY</code>，之后添加代码：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">&#123;#####################&#125;</span><br><span class="line">&#123;### END POST BODY ###&#125;</span><br><span class="line">&#123;#####################&#125;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% <span class="keyword">if</span> not is_index %&#125;</span><br><span class="line">    	&#123;% include <span class="string">&#x27;passage-end-tag.swig&#x27;</span> %&#125;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>打开主题配置文件即<code>/themes/next/_config.yml</code>,在末尾添加：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">passage_end_tag:</span></span><br><span class="line">  <span class="attr">enabled:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="统计功能"><a href="#统计功能" class="headerlink" title="统计功能"></a>统计功能</h3><p>打开主题配置文件即<code>/themes/next/_config.yml</code></p>
<p>搜索<code>busuanzi_count</code>,修改如下：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">busuanzi_count:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_visitors_icon:</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">total_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">total_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br><span class="line">  <span class="attr">post_views:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">post_views_icon:</span> <span class="string">fa</span> <span class="string">fa-eye</span></span><br></pre></td></tr></table></figure>

<p>搜索<code>footer</code>,添加如下：（要在footer:的里面）</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment">#统计</span></span><br><span class="line">  <span class="attr">counter:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<p>打开<code>/themes/next/layout/_partials</code>,在底下添加：</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;% if theme.footer.counter %&#125;</span><br><span class="line">    &lt;script async src=<span class="string">&quot;//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<h3 id="设置菜单"><a href="#设置菜单" class="headerlink" title="设置菜单"></a>设置菜单</h3><p>打开主题配置文件即<code>/themes/next/_config.yml</code>，查找<code>menu</code>，添加页面，可以自定义。</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">/about/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-user</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">/tags/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-tags</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">/categories/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-th</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">/archives/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-archive</span></span><br><span class="line">  <span class="attr">resources:</span> <span class="string">/resources/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-download</span></span><br><span class="line">  <span class="comment">#schedule: /schedule/ || fa fa-calendar</span></span><br><span class="line">  <span class="comment">#sitemap: /sitemap.xml || fa fa-sitemap</span></span><br><span class="line">  <span class="comment">#commonweal: /404/ || fa fa-heartbeat</span></span><br></pre></td></tr></table></figure>

<p>新添加的菜单需要翻译对应的中文，打开<code>/theme/next/languages/zh-CN.yml</code>，在<code>menu</code>下设置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="attr">home:</span> <span class="string">首页</span></span><br><span class="line">  <span class="attr">archives:</span> <span class="string">归档</span></span><br><span class="line">  <span class="attr">categories:</span> <span class="string">分类</span></span><br><span class="line">  <span class="attr">tags:</span> <span class="string">标签</span></span><br><span class="line">  <span class="attr">about:</span> <span class="string">关于</span></span><br><span class="line">  <span class="attr">resources:</span> <span class="string">资源</span></span><br><span class="line">  <span class="attr">search:</span> <span class="string">搜索</span></span><br><span class="line">  <span class="attr">schedule:</span> <span class="string">日程表</span></span><br><span class="line">  <span class="attr">sitemap:</span> <span class="string">站点地图</span></span><br><span class="line">  <span class="attr">commonweal:</span> <span class="string">公益</span> <span class="number">404</span></span><br></pre></td></tr></table></figure>

<p>在根目录下打开<code>Git Bash</code>，输入如下代码：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page <span class="string">&quot;categories&quot;</span></span><br><span class="line">hexo new page <span class="string">&quot;tags&quot;</span></span><br><span class="line">hexo new page <span class="string">&quot;about&quot;</span></span><br><span class="line">hexo new page <span class="string">&quot;resources&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="顶部加载条"><a href="#顶部加载条" class="headerlink" title="顶部加载条"></a>顶部加载条</h3><p>在<code>/themes/next</code>目录下打开<code>Git Bash</code>，输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/theme-next/theme-next-pace <span class="built_in">source</span>/lib/pace</span><br></pre></td></tr></table></figure>

<p>在<code>/themes/next/_config.yml</code>，找到<code>pace</code>，修改代码：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">pace:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="comment"># Themes list:</span></span><br><span class="line">  <span class="comment"># big-counter | bounce | barber-shop | center-atom | center-circle | center-radar | center-simple</span></span><br><span class="line">  <span class="comment"># corner-indicator | fill-left | flat-top | flash | loading-bar | mac-osx | material | minimal</span></span><br><span class="line">  <span class="attr">theme:</span> <span class="string">minimal</span></span><br></pre></td></tr></table></figure>

<h3 id="置顶"><a href="#置顶" class="headerlink" title="置顶"></a>置顶</h3><p>在根目录下打开<code>Git Bash</code>，输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure>

<p>设置置顶标志</p>
<p>打开<code>/themes/next/layout/_macro/post.swig</code>，定位到<code>&lt;div class=&quot;post-meta&quot;&gt;</code>标签下，插入如下代码：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line">&#123;% if post.top %&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa fa-thumb-tack&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">7D26CD</span>&gt;</span>置顶<span class="tag">&lt;/<span class="name">font</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;post-meta-divider&quot;</span>&gt;</span>|<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure>

<p>在文章中添加top</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">top:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>

<h3 id="本地搜索"><a href="#本地搜索" class="headerlink" title="本地搜索"></a>本地搜索</h3><p>在根目录下打开<code>Git Bash</code>，输入：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure>

<p>打开<code>/_config.yml</code>，添加代码：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br><span class="line">  <span class="attr">format:</span> <span class="string">html</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10000</span></span><br></pre></td></tr></table></figure>



<p>打开<code>/themes/next/_config.yml</code>，查找<code>local_search</code> ，修改代码：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">local_search:</span></span><br><span class="line">  <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">trigger:</span> <span class="string">manual</span>   <span class="comment">#手动，按回车键或搜索按钮触发搜索</span></span><br></pre></td></tr></table></figure>



<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a href="https://blog.csdn.net/Growing_potato/article/details/113926856?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1.no_search_link">next主题美化——背景图片、页面透明化、阴影、圆角、动画</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/106060640">个人博客第8篇——优化主题（持续更新）</a></p>
<p><a href="https://www.bbsmax.com/A/amd0j6R6Jg/">使用hexo-neat插件压缩页面静态资源 (bbsmax.com)</a></p>
<p><a href="https://blog.csdn.net/nightmare_dimple/article/details/86661502">Hexo博客优化之Next主题美化_huangpiao-CSDN博客_hexo next</a></p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>美化</category>
      </categories>
      <tags>
        <tag>博客</tag>
        <tag>主题美化</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化：添加评论</title>
    <url>/posts/7c915937/</url>
    <content><![CDATA[<p>​    一篇心得，与人分享，怎么可以没有讨论呢，因此一篇文章的评论功能是必不可少的。</p>
<span id="more"></span>

<h3 id="注册来必力-账号"><a href="#注册来必力-账号" class="headerlink" title="注册来必力 账号"></a>注册<a href="http://livere.com/">来必力 </a>账号</h3><p>验证邮箱就可以完成验证</p>
<p><img src="/posts/7c915937/sign_1.jpg"></p>
<p>登录来必力账号，选择<code>安装</code>，安装免费版</p>
<p><img src="/posts/7c915937/sign_2.jpg"></p>
<p>第一次下侧会出现一个框让你填写网站信息，然后获取代码就行。注意网络链接是你的博客链接。</p>
<h3 id="复制data-uid代码"><a href="#复制data-uid代码" class="headerlink" title="复制data-uid代码"></a>复制<code>data-uid</code>代码</h3><p><img src="/posts/7c915937/sign_3.jpg"></p>
<p>4.配置主题文件</p>
<p>在<code>/themes/next/_config.yml</code>,中找到<code>livere_uid</code>,粘贴代码</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">livere_uid:</span> <span class="string">&quot;uid代码&quot;</span></span><br></pre></td></tr></table></figure>

<h3 id="设置提醒"><a href="#设置提醒" class="headerlink" title="设置提醒"></a>设置提醒</h3><p><img src="/posts/7c915937/sign_4.jpg"></p>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>在根目录下打开<code>Git Bash</code>,输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean&amp;&amp;hexo g&amp;&amp;hexo d</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>hexo</category>
        <category>评论</category>
      </categories>
      <tags>
        <tag>博客</tag>
        <tag>来必力</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化：添加音乐</title>
    <url>/posts/ac324628/</url>
    <content><![CDATA[<p>​    自己的博客，搭配上自己的歌单，写起来才更方松。配置过程比较简单，在博客页面中添加Metingjs代码，接着填入歌单信息就行。</p>
<span id="more"></span>

<h3 id="1-获取歌单信息"><a href="#1-获取歌单信息" class="headerlink" title="1.获取歌单信息"></a>1.获取歌单信息</h3><p>将自己的想添加的歌单分享出去，然后在浏览器上打开，其中的一串数，或者是<code>id=</code>，就是要获得信息。</p>
<p><img src="/posts/ac324628/config_0.jpg"></p>
<h3 id="2-添加Metingjs代码到侧边栏"><a href="#2-添加Metingjs代码到侧边栏" class="headerlink" title="2.添加Metingjs代码到侧边栏"></a>2.添加Metingjs代码到侧边栏</h3><p>在<code>themes\next\layout\_macro\sidebar.swig</code>找到类名为<code>sidebar-inner</code>的代码块位置：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- require APlayer --&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.css&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/aplayer@1.10.1/dist/APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!-- require MetingJS--&gt;</span></span><br><span class="line"></span><br><span class="line">      <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/meting@2.0.1/dist/Meting.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line">      <span class="comment">&lt;!--playlist外链地址--&gt;</span>   </span><br><span class="line">      <span class="tag">&lt;<span class="name">meting-js</span></span></span><br><span class="line"><span class="tag">          <span class="attr">server</span>=<span class="string">&quot;tencent&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">type</span>=<span class="string">&quot;playlist&quot;</span> </span></span><br><span class="line"><span class="tag">          <span class="attr">id</span>=<span class="string">&quot;8239047461&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">mini</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">fixed</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">list-folded</span>=<span class="string">&quot;true&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">autoplay</span>=<span class="string">&quot;false&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">volume</span>=<span class="string">&quot;0.4&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">theme</span>=<span class="string">&quot;#FADFA3&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">order</span>=<span class="string">&quot;list&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">loop</span>=<span class="string">&quot;all&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">preload</span>=<span class="string">&quot;auto&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">lrc-type</span>=<span class="string">&quot;1&quot;</span></span></span><br><span class="line"><span class="tag">          <span class="attr">mutex</span>=<span class="string">&quot;true&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">meting-js</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/posts/ac324628/config_1.jpg"></p>
<p>代码的具体含义可以参照官方文档：<a href="https://aplayer.js.org/#/home">APlayer</a>，<a href="https://github.com/metowolf/MetingJS">MetingJS</a>。</p>
<p>其中<code>server</code>,<code> type</code>,<code>id</code>,需要修改，我这里使用的是QQ音乐的歌单</p>
<h3 id="3-实现全局播放"><a href="#3-实现全局播放" class="headerlink" title="3.实现全局播放"></a>3.实现全局播放</h3><p>打开<code>themes\next\layout</code>文件夹找到<code>_layout.swig</code>，并复制以下代码到<code>&lt;head&gt;</code>标签后</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--pjax：防止跳转页面音乐暂停--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><img src="/posts/ac324628/config_2.jpg"></p>
<p>在<code>themes\next\_config.yml</code>中找到<code>pjax</code>，将它设置为<code>true</code></p>
<p><img src="/posts/ac324628/config_3.jpg"></p>
<p>后面就可以通过<code>hexo</code>命令生成界面了。</p>
<p><img src="/posts/ac324628/config_4.jpg"></p>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a href="https://blog.csdn.net/qq_39800978/article/details/109407258?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_baidulandingword~default-1.no_search_link&spm=1001.2101.3001.4242.2">Hexo博客设置背景音乐_Z先森9701的博客-CSDN博客</a></p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>Aplayer</category>
      </categories>
      <tags>
        <tag>博客</tag>
        <tag>Aplayer</tag>
        <tag>Metingjs</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化：文章链接</title>
    <url>/posts/706fbb62/</url>
    <content><![CDATA[<p>​    hexo生成的链接的格式和文章的时间标题有关，当更换标题或者时间时，就会改变链接地址，导致产生死链。因此将其替换掉是一个一劳永逸的方法。</p>
<span id="more"></span>

<p>连接在修改容易造成死链由于博客文章永久链接格式是：</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">year/:month/:day/:title/</span><br></pre></td></tr></table></figure>

<p>在hexo博客根目录，打开<code>Git Bash</code>,输入</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-abbrlink --save</span><br></pre></td></tr></table></figure>

<p>打开hexo博客根目录的<code>_config.yml</code>，修改如下配置：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># permalink: :year/:month/:day/:title/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">posts/:abbrlink/</span>  <span class="comment">#会改变文章图片链接</span></span><br><span class="line"><span class="attr">abbrlink:</span></span><br><span class="line">    <span class="attr">alg:</span> <span class="string">crc32</span>   <span class="comment">#算法： crc16(default) and crc32</span></span><br><span class="line">    <span class="attr">rep:</span> <span class="string">hex</span>     <span class="comment">#进制： dec(default) and hex</span></span><br></pre></td></tr></table></figure>

<p>不同算法和进制生成不同的格式：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">crc16 &amp; hex</span><br><span class="line">https:<span class="comment">//post.zz173.com/posts/66c8.html</span></span><br><span class="line">crc16 &amp; dec</span><br><span class="line">https:<span class="comment">//post.zz173.com/posts/65535.html</span></span><br><span class="line"></span><br><span class="line">crc32 &amp; hex</span><br><span class="line">https:<span class="comment">//post.zz173.com/posts/8ddf18fb.html</span></span><br><span class="line">crc32 &amp; dec</span><br><span class="line">https:<span class="comment">//post.zz173.com/posts/1690090958.html</span></span><br></pre></td></tr></table></figure>

<p>使用<code>hexo clean &amp;&amp; hexo g</code>重新生成博客，在博客源文件可以看到自动生成的abbrlink编号：</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">title:</span> <span class="string">博客优化：文章链接</span></span><br><span class="line"><span class="attr">tags:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">博客</span></span><br><span class="line"><span class="attr">categories:</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">hexo</span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">文章链接</span></span><br><span class="line"><span class="attr">comments:</span> <span class="literal">true</span></span><br><span class="line"><span class="attr">abbrlink:</span> <span class="string">706fbb62</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2021-11-14 13:46:02</span></span><br></pre></td></tr></table></figure>



<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a href="https://mp.weixin.qq.com/s/PJbCXkKvmHqEiHftM-2Hkg">优化文章永久链接为数字编号</a></p>
<p><a href="https://zhuanlan.zhihu.com/p/134492757">Hexo 生成永久文章链接</a></p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>文章链接</category>
      </categories>
      <tags>
        <tag>博客</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化：文章插图</title>
    <url>/posts/715bf213/</url>
    <content><![CDATA[<p>​    一篇好的博文，不能只有文字，还需要有配图才行。我试过网上的很多方法都没有实现，最后还是找到了一种适合自己的方法。</p>
<p>​    <span id="more"></span></p>
<p>本文只介绍如何插入本地图片。</p>
<h3 id="1-配置插件"><a href="#1-配置插件" class="headerlink" title="1.配置插件"></a>1.配置插件</h3><p>在<code>hexo站点根目录</code>打开<code>Git Bash</code></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-asset-image --save <span class="comment">#安装插件</span></span><br></pre></td></tr></table></figure>

<p>打开hexo配置文件<code>_config.yml</code>，将<code>post_asset_folder</code>改成<code>true</code></p>
<p><img src="/posts/715bf213/config_1.jpg"></p>
<p>打开<code>/node_modules/hexo-asset-image/index.js</code>,替换内容如下：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="meta">&#x27;use strict&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> cheerio = <span class="built_in">require</span>(<span class="string">&#x27;cheerio&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// http://stackoverflow.com/questions/14480345/how-to-get-the-nth-occurrence-in-a-string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getPosition</span>(<span class="params">str, m, i</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> str.split(m, i).join(m).length;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> version = <span class="built_in">String</span>(hexo.version).split(<span class="string">&#x27;.&#x27;</span>);</span><br><span class="line">hexo.extend.filter.register(<span class="string">&#x27;after_post_render&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">var</span> config = hexo.config;</span><br><span class="line">  <span class="keyword">if</span>(config.post_asset_folder)&#123;</span><br><span class="line">        <span class="keyword">var</span> link = data.permalink;</span><br><span class="line">    <span class="keyword">if</span>(version.length &gt; <span class="number">0</span> &amp;&amp; <span class="built_in">Number</span>(version[<span class="number">0</span>]) == <span class="number">3</span>)</span><br><span class="line">       <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">var</span> beginPos = getPosition(link, <span class="string">&#x27;/&#x27;</span>, <span class="number">3</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="comment">// In hexo 3.1.1, the permalink of &quot;about&quot; page is like &quot;.../about/index.html&quot;.</span></span><br><span class="line">    <span class="keyword">var</span> endPos = link.lastIndexOf(<span class="string">&#x27;/&#x27;</span>) + <span class="number">1</span>;</span><br><span class="line">    link = link.substring(beginPos, endPos);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> toprocess = [<span class="string">&#x27;excerpt&#x27;</span>, <span class="string">&#x27;more&#x27;</span>, <span class="string">&#x27;content&#x27;</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; toprocess.length; i++)&#123;</span><br><span class="line">      <span class="keyword">var</span> key = toprocess[i];</span><br><span class="line"> </span><br><span class="line">      <span class="keyword">var</span> $ = cheerio.load(data[key], &#123;</span><br><span class="line">        <span class="attr">ignoreWhitespace</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">xmlMode</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">lowerCaseTags</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">decodeEntities</span>: <span class="literal">false</span></span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      $(<span class="string">&#x27;img&#x27;</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>))&#123;</span><br><span class="line">            <span class="comment">// For windows style path, we replace &#x27;\&#x27; to &#x27;/&#x27;.</span></span><br><span class="line">            <span class="keyword">var</span> src = $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>).replace(<span class="string">&#x27;\\&#x27;</span>, <span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">            <span class="keyword">if</span>(!<span class="regexp">/http[s]*.*|\/\/.*/</span>.test(src) &amp;&amp;</span><br><span class="line">               !<span class="regexp">/^\s*\//</span>.test(src)) &#123;</span><br><span class="line">              <span class="comment">// For &quot;about&quot; page, the first part of &quot;src&quot; can&#x27;t be removed.</span></span><br><span class="line">              <span class="comment">// In addition, to support multi-level local directory.</span></span><br><span class="line">              <span class="keyword">var</span> linkArray = link.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">var</span> srcArray = src.split(<span class="string">&#x27;/&#x27;</span>).filter(<span class="function"><span class="keyword">function</span>(<span class="params">elem</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">return</span> elem != <span class="string">&#x27;&#x27;</span> &amp;&amp; elem != <span class="string">&#x27;.&#x27;</span>;</span><br><span class="line">              &#125;);</span><br><span class="line">              <span class="keyword">if</span>(srcArray.length &gt; <span class="number">1</span>)</span><br><span class="line">                srcArray.shift();</span><br><span class="line">              src = srcArray.join(<span class="string">&#x27;/&#x27;</span>);</span><br><span class="line">              $(<span class="built_in">this</span>).attr(<span class="string">&#x27;src&#x27;</span>, config.root + link + src);</span><br><span class="line">              <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;update link as:--&gt;&quot;</span>+config.root + link + src);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info(<span class="string">&quot;no src attr, skipped...&quot;</span>);</span><br><span class="line">            <span class="built_in">console</span>.info&amp;&amp;<span class="built_in">console</span>.info($(<span class="built_in">this</span>));</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">      data[key] = $.html();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="2-新建博文"><a href="#2-新建博文" class="headerlink" title="2.新建博文"></a>2.新建博文</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new <span class="string">&quot;文件名&quot;</span></span><br></pre></td></tr></table></figure>

<p>此时在<code>/source/_posts</code>文件夹下就会一个同名文件夹和同名的.md文件</p>
<p>在md文件里面按照Markdownd的格式只需要写入图片的名字，不过在文档中不显示，生成静态文件才会显示出来</p>
<figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line">![](图片名.jpg)</span><br></pre></td></tr></table></figure>

<p>在此感谢DCBXZ的文章[HEXO插入图片（详细版）](<a href="https://www.jianshu.com/p/f72aaad7b852">HEXO插入图片（详细版） - 简书 (jianshu.com)</a>)，使我解决了问题。</p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>图片插入</category>
      </categories>
      <tags>
        <tag>博客</tag>
      </tags>
  </entry>
  <entry>
    <title>博客优化：持续集成</title>
    <url>/posts/2942ffab/</url>
    <content><![CDATA[<p>​    通过AppVeyor将博客的编译的过程托管出去，一次配置，一劳永逸。</p>
<span id="more"></span>

<p>这一篇是在上一篇如何基于hexo+github搭建个人博客之后进行的。</p>
<p>首先为什么会写这么一篇文章，一方面是为了记录一下自己的搭建心得，另一方面当然是为了方便了。</p>
<p>在本地电脑上配置好所有的hexo环境之后，写好的md.文件只能在本地通过<code>hexo  -g</code> 编译，而且只能在这一台电脑上完成，如果你换一台电脑，或者硬盘崩了，都需要重新配置。</p>
<p>如果我们把编译的过程托管出去，而我们只需要向github提交文件，就会简单很多。</p>
<h3 id="1-在GitHub上备份hexo编译环境和博文"><a href="#1-在GitHub上备份hexo编译环境和博文" class="headerlink" title="1.在GitHub上备份hexo编译环境和博文"></a>1.在<a href="https://github.com/">GitHub</a>上备份hexo编译环境和博文</h3><h4 id="新建仓库"><a href="#新建仓库" class="headerlink" title="新建仓库"></a>新建仓库</h4><p><img src="/posts/2942ffab/start_a_project.jpg"></p>
<p>权限设为public</p>
<p><img src="/posts/2942ffab/start_a_project2.jpg"></p>
<p>初始化本地仓库（使用hexo搭建的本地文件夹,也就是原来使用<code>hexo -g</code>的站点目录）</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin 新建仓库的网址</span><br></pre></td></tr></table></figure>

<p><img src="/posts/2942ffab/start_a_project3.jpg"></p>
<h4 id="修改-gitignore文件"><a href="#修改-gitignore文件" class="headerlink" title="修改.gitignore文件"></a>修改<code>.gitignore</code>文件</h4><p>由于目录下一些文件是通过hexo -g 生成的，所以不需要去备份。</p>
<p>在<code>.gitignore</code>文件添加不需要上传的文件如下：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">package-lock.json</span><br></pre></td></tr></table></figure>

<h4 id="上传文件到github"><a href="#上传文件到github" class="headerlink" title="上传文件到github"></a>上传文件到github</h4><p>在上传之前，如果你使用的是github上下载的主题，<strong>请一定要删除里面的<code>.git</code>隐藏文件</strong>，否则构建完成后，会缺少一部分页面元素</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git add .				#添加当前目录下的所有文件到暂存区</span><br><span class="line">git commit -m &quot;hexo source&quot;		#将暂存区内容添加到仓库中。	</span><br><span class="line">git push origin main			#将本地的分支版本上传到远程并合并,一般默认的分支是master,我的是main</span><br></pre></td></tr></table></figure>

<p>此时查看自己的仓库，应该已经有了文件。</p>
<h3 id="2-实现持续集成"><a href="#2-实现持续集成" class="headerlink" title="2.实现持续集成"></a>2.实现持续集成</h3><p>访问<a href="https://ci.appveyor.com/login">AppVeyor</a></p>
<p>Appveyor对于windows支持比较友好，支持代码提交到github。</p>
<p><img src="/posts/2942ffab/CI_1.jpg"></p>
<p>第一次登录时，会让github授权，同意就行。</p>
<h4 id="创建新项目"><a href="#创建新项目" class="headerlink" title="创建新项目"></a>创建新项目</h4><p><img src="/posts/2942ffab/CI_2.jpg"></p>
<p>选择在github上新建的仓库</p>
<p><img src="/posts/2942ffab/CI_3.jpg"></p>
<h4 id="打开github设置Settings"><a href="#打开github设置Settings" class="headerlink" title="打开github设置Settings"></a>打开github设置<code>Settings</code></h4><p><img src="/posts/2942ffab/CI_4.jpg"></p>
<p>选择<code>Developer Settings</code></p>
<p><img src="/posts/2942ffab/CI_5.jpg"></p>
<p>选择<code>Personal access tokens</code></p>
<p><img src="/posts/2942ffab/CI_6.jpg"></p>
<p>配置<code>Personal access tokens</code></p>
<p><img src="/posts/2942ffab/CI_7.jpg"></p>
<p>配置完成后，下滑到最后，点击<code>Generate token1</code> 生成tokens</p>
<p>复制<code>Access Token</code></p>
<p><img src="/posts/2942ffab/CI_8.jpg"></p>
<h4 id="打开AppVeyor加密页面，加密Access-Token"><a href="#打开AppVeyor加密页面，加密Access-Token" class="headerlink" title="打开AppVeyor加密页面，加密Access Token"></a>打开AppVeyor加密页面，加密<code>Access Token</code></h4><p>因为生成的Token需要写进公开的脚本中，所以要进行加密</p>
<p><img src="/posts/2942ffab/CI_9.jpg"></p>
<p>复制加密的Token</p>
<h4 id="在本地根目录下新建一个文件appveyor-yml"><a href="#在本地根目录下新建一个文件appveyor-yml" class="headerlink" title="在本地根目录下新建一个文件appveyor.yml"></a>在本地根目录下新建一个文件<code>appveyor.yml</code></h4><p><img src="/posts/2942ffab/CI_10.jpg"></p>
<p>粘贴以下代码：其中<strong>将加密的Token粘贴进去</strong></p>
<figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">clone_depth:</span> <span class="number">5</span>  </span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">access_token:</span></span><br><span class="line">    <span class="attr">secure:</span> <span class="comment">#### 从#开始删除，将加密的Token粘贴在此处 ####    </span></span><br><span class="line">    </span><br><span class="line"><span class="attr">install:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">ps:</span> <span class="string">Install-Product</span> <span class="string">node</span> </span><br><span class="line">    <span class="bullet">-</span> <span class="string">node</span> <span class="string">--version</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">--version</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-cli</span> <span class="string">-g</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-deployer-git</span> <span class="string">--save</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-archive</span> <span class="string">--save</span>   </span><br><span class="line">    <span class="comment">####### 根据自己需求，下载的hexo 插件 ##############</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-search</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">uninstall</span> <span class="string">hexo-generator-index</span> <span class="string">--save</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-generator-index-pin-top</span> <span class="string">--save</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">install</span> <span class="string">hexo-asset-image</span> <span class="string">--save</span></span><br><span class="line">    <span class="comment">################################################</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">npm</span> <span class="string">ls</span> <span class="string">--depth</span> <span class="number">0</span>  <span class="comment">#检查安装的插件</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">build_script:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">artifacts:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">path:</span> <span class="string">public</span></span><br><span class="line">    </span><br><span class="line"><span class="attr">on_success:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">credential.helper</span> <span class="string">store</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">ps:</span> <span class="string">Add-Content</span> <span class="string">&quot;$env:USERPROFILE\.git-credentials&quot;</span> <span class="string">&quot;https://$($env:access_token):x-oauth-basic@github.com`n&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> <span class="string">&quot;%GIT_USER_EMAIL%&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> <span class="string">&quot;%GIT_USER_NAME%&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">clone</span> <span class="string">--depth</span> <span class="number">5</span> <span class="string">-q</span> <span class="string">--branch=%TARGET_BRANCH%</span> <span class="string">%STATIC_SITE_REPO%</span> <span class="string">%TEMP%\static-site</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">cd</span> <span class="string">%TEMP%\static-site</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">del</span> <span class="string">*</span> <span class="string">/f</span> <span class="string">/q</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">for</span> <span class="string">/d</span> <span class="string">%%p</span> <span class="string">IN</span> <span class="string">(*)</span> <span class="string">do</span> <span class="string">rmdir</span> <span class="string">&quot;%%p&quot;</span> <span class="string">/s</span> <span class="string">/q</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">SETLOCAL</span> <span class="string">EnableDelayedExpansion</span> <span class="string">&amp;</span> <span class="string">robocopy</span> <span class="string">&quot;%APPVEYOR_BUILD_FOLDER%\public&quot;</span> <span class="string">&quot;%TEMP%\static-site&quot;</span> <span class="string">/e</span> <span class="string">&amp;</span> <span class="string">IF</span> <span class="type">!ERRORLEVEL</span><span class="string">!</span> <span class="string">EQU</span> <span class="number">1</span> <span class="string">(exit</span> <span class="number">0</span><span class="string">)</span> <span class="string">ELSE</span> <span class="string">(IF</span> <span class="type">!ERRORLEVEL</span><span class="string">!</span> <span class="string">EQU</span> <span class="number">3</span> <span class="string">(exit</span> <span class="number">0</span><span class="string">)</span> <span class="string">ELSE</span> <span class="string">(exit</span> <span class="number">1</span><span class="string">))</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">add</span> <span class="string">-A</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;Update Static Site&quot;</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">git</span> <span class="string">push</span> <span class="string">origin</span> <span class="string">%TARGET_BRANCH%</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">appveyor</span> <span class="string">AddMessage</span> <span class="string">&quot;Static Site Updated&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="打开AppVeyor新建的项目界面，配置environment"><a href="#打开AppVeyor新建的项目界面，配置environment" class="headerlink" title="打开AppVeyor新建的项目界面，配置environment"></a>打开AppVeyor新建的项目界面，配置<code>environment</code></h4><p><img src="/posts/2942ffab/CI_12.jpg"></p>
<h4 id="将文件上传到github"><a href="#将文件上传到github" class="headerlink" title="将文件上传到github"></a>将文件上传到github</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git add -A   <span class="comment"># 暂存提交，和git add . 的区别是可以删除文件</span></span><br><span class="line">git commit -m <span class="string">&quot;first&quot;</span></span><br><span class="line">git push origin main   <span class="comment">#默认是master</span></span><br></pre></td></tr></table></figure>

<p>此时已经基本完成所有操作，可以在Appveyor网站的<code>current build</code>观察到当前的构件情况</p>
<p><img src="/posts/2942ffab/CI_13.jpg"></p>
<p>可以看到最后成功了</p>
<p><img src="/posts/2942ffab/CI_14.jpg"></p>
<p>后面就可以通过向新建的备份文件仓库<code>push</code>文件就行了。</p>
<p>如果换了新电脑，只需要将仓库的文件<code>clone </code>下来就行了</p>
<h3 id="补充："><a href="#补充：" class="headerlink" title="补充："></a>补充：</h3><p>我在编译过程中发现没有Error，但是页面仍没有加载出来，而且什么都没有了。最后查看解析过程发现有一个 <code>No layout</code>的<code>Warn</code>。</p>
<p><img src="/posts/2942ffab/CI_15.jpg"></p>
<p>原来是因为上传主题，而主题里面有一个.git的隐藏文件，上传时会把这个主题当成一个独立的模块，导致页面生成失败。</p>
<p>解决方案是：</p>
<p>1.删除文件夹里面的.git文件夹</p>
<p>2.执行下面的代码</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git rm -r --cached [文件夹名]</span><br><span class="line">git add [文件夹名]</span><br><span class="line">git commit -m <span class="string">&quot;No git File&quot;</span></span><br><span class="line">git push origin [branch_name] </span><br></pre></td></tr></table></figure>



<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a href="https://blog.csdn.net/Mculover666/article/details/94837390">使用Appveyor持续集成博客</a></p>
<p><a href="https://blog.csdn.net/weixin_34088583/article/details/88772236">使用AppVeyor持续集成博客</a></p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>持续集成</category>
      </categories>
      <tags>
        <tag>博客</tag>
        <tag>持续集成</tag>
      </tags>
  </entry>
  <entry>
    <title>搭建博客-基于hexo-github</title>
    <url>/posts/29cff741/</url>
    <content><![CDATA[<p>自己搭建一个博客，可以锻炼自己的能力， 也可以去记录一下自己的心得。本文是将资源托管于github仓库，基于hexo搭建的，下面是我自己记录的搭建过程。</p>
<p>我使用的软件及版本如下：</p>
<ul>
<li><p>node  V16.13.0</p>
</li>
<li><p>git     Version 2.33.1.windows.1</p>
</li>
</ul>
<span id="more"></span>

<h3 id="1-注册一个gitHub的账号"><a href="#1-注册一个gitHub的账号" class="headerlink" title="1.注册一个gitHub的账号"></a>1.注册一个gitHub的账号</h3><p>如果进不去<a href="https://www.github.com/">github</a>的官网，则在本地hosts的文件(C:\Windows\System32\drivers\etc)添加:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">//这个ip可能会变化</span></span><br><span class="line"><span class="number">140.82</span><span class="number">.114</span><span class="number">.4</span> github.com</span><br><span class="line"><span class="number">185.199</span><span class="number">.108</span><span class="number">.153</span> assets-cdn.github.com</span><br><span class="line"><span class="number">199.232</span><span class="number">.69</span><span class="number">.194</span> github.global.ssl.fastly.net</span><br></pre></td></tr></table></figure>

<ul>
<li>host的文件修改需要权限</li>
<li><a href="https://www.ipaddress.com/">IPAddress.com</a>网站,查询上面三个地址ip</li>
</ul>
<h3 id="2-安装git。"><a href="#2-安装git。" class="headerlink" title="2.安装git。"></a>2.安装git。</h3><p>下载网址：<a href="https://git-scm.com/">https://git-scm.com/</a></p>
<p>路径自定义，其他的默认安装即可。</p>
<p>这个注意：后面会用到。</p>
<p>![](git_setup_branches.jpg）</p>
<p>安装完成后<br>点击鼠标右键，出现下图图标，说明安装完成。</p>
<p><img src="/posts/29cff741/check_git.png"><br>打开Git Bash,输入git –version,出现版本号，则表示安装完成。</p>
<p><img src="/posts/29cff741/git_version.jpg"></p>
<h3 id="3-绑定SSH"><a href="#3-绑定SSH" class="headerlink" title="3.绑定SSH"></a>3.绑定SSH</h3><p>通过ssh协议生成公钥，将github和本地连接起来，完成后可以在本地通过gi命令上传文件</p>
<p>在git bash 里面输入 ssh-keygen -t rsa,<strong>并敲四次回车</strong></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa</span><br></pre></td></tr></table></figure>

<p>生成两个文件，分别为秘钥 id_rsa 和公钥 id_rsa.pub</p>
<p>一般在根目录的文件下，windows稍微特别，在用户文件里（C:/Users/用户名/.ssh）</p>
<p><img src="/posts/29cff741/ssh-setup.jpg"></p>
<p>用记事本打开 id_rsa.pub，并将其中内容全部复制</p>
<p><img src="/posts/29cff741/ssh-setup2.jpg"><br>打开自己的github设置<br><img src="/posts/29cff741/ssh-setup3.jpg"></p>
<p>选择SSH and GPG keys</p>
<p><img src="/posts/29cff741/ssh-setup4.jpg"></p>
<p>将公钥粘贴进去</p>
<p><img src="/posts/29cff741/ssh-setup5.jpg"><br>验证是否成功，我们可以通过在 Git Bash 中输入 ssh -T <a href="mailto:&#x67;&#105;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#x62;&#x2e;&#99;&#x6f;&#x6d;">&#x67;&#105;&#x74;&#x40;&#x67;&#105;&#x74;&#104;&#117;&#x62;&#x2e;&#99;&#x6f;&#x6d;</a> 进行检验：</p>
<p>第一次会询问你是否继续连接，输入yes就行，然后再输一次，就正常了。</p>
<p><img src="/posts/29cff741/ssh-setup6.jpg"><br>新建项目</p>
<p><img src="/posts/29cff741/ssh-setup7.jpg"><br>项目配置如下:</p>
<p><img src="/posts/29cff741/ssh-setup8.jpg"><br>回到主页，点击刚建好的项目</p>
<p><img src="/posts/29cff741/ssh-setup9.jpg"></p>
<p>复制刚建好的项目网址<br><img src="/posts/29cff741/ssh-setup10.jpg"></p>
<p>在本地计算机新建一个文件夹，比如我的文件夹在(D:/MyBlog)</p>
<p>然后在该文件下右键打开Cit bash输入：git clone 项目网址</p>
<p><img src="/posts/29cff741/ssh-setup11.jpg"></p>
<h3 id="4-安装node-js"><a href="#4-安装node-js" class="headerlink" title="4.安装node.js"></a>4.安装<a href="https://nodejs.org/en/">node.js</a></h3><p>测试是否安装完成</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">node -v </span><br><span class="line">npm -v</span><br></pre></td></tr></table></figure>

<h4 id="配置npm在安装全局模块时的路径和缓存cache的路径"><a href="#配置npm在安装全局模块时的路径和缓存cache的路径" class="headerlink" title="配置npm在安装全局模块时的路径和缓存cache的路径"></a>配置npm在安装全局模块时的路径和缓存cache的路径</h4><p>因为在执行例如npm install webpack -g等命令全局安装的时候，默认会将模块安装在C:\Users\用户名\AppData\Roaming路径下的npm和npm_cache中，不方便管理且占用C盘空间，所以这里配置自定义的全局模块安装目录，在node.js安装目录下新建两个文件夹 node_global和node_cache，然后在cmd命令下执行如下两个命令：<br><img src="/posts/29cff741/ssh-setup12.jpg"></p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> prefix &quot;F:\Program Files\nodejs\node_global&quot;</span><br><span class="line">npm config <span class="built_in">set</span> cache &quot;F:\Program Files\nodejs\node_cache&quot;</span><br></pre></td></tr></table></figure>

<h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4><p>在系统变量中新建一个变量名为 “NODE_PATH”<br><img src="/posts/29cff741/ssh-setup12.jpg"></p>
<p>编辑用户变量里的Path，将相应npm的路径改为如图所示：</p>
<p><img src="/posts/29cff741/ssh-setup13.jpg"></p>
<h3 id="5-下载-webpack"><a href="#5-下载-webpack" class="headerlink" title="5.下载 webpack"></a>5.下载 webpack</h3><p>在cmd中执行</p>
<figure class="highlight cmd"><table><tr><td class="code"><pre><span class="line">npm install webpack -g</span><br></pre></td></tr></table></figure>

<p>执行 npm webpack -v，查看webpack是否安装成功，</p>
<h3 id="6-安装Hexo"><a href="#6-安装Hexo" class="headerlink" title="6.安装Hexo"></a>6.安装Hexo</h3><p>点开MyBlog 文件夹，鼠标右键打开 Git Bush Here，输入：</p>
<figure class="highlight plaintext"><figcaption><span>bash</span></figcaption><table><tr><td class="code"><pre><span class="line">npm install webpack -g</span><br></pre></td></tr></table></figure>

<p>初始化博客：</p>
<figure class="highlight plaintext"><figcaption><span>bash</span></figcaption><table><tr><td class="code"><pre><span class="line">hexo init</span><br></pre></td></tr></table></figure>

<p>在本地静态部署：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo g</span><br></pre></td></tr></table></figure>

<p>在本地查看：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure>

<p>此时框架已经基本在本地布置完成:可以在 <a href="http://localhost:4000/">http://localhost:4000</a> 查看新部署的网页，ctrl+c停止运行</p>
<p>将Hexo部署到GitHub</p>
<p>用记事本打开当前文件夹下的 _config.yml 文件</p>
<p>并在底部写上如下代码，需要把原来的deploy删除，另外冒号后面要有空格<br><img src="/posts/29cff741/ssh-setup13.jpg"><br>在MyBlog 文件夹中，右键打开 Git Bash，安装Git部署插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure>

<p>生成静态网页，并提交到github上</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean   #清除缓存文件和已生成的静态文件</span><br><span class="line">hexo g       #生成网站静态文件</span><br><span class="line">hexo d       #部署到github上的仓库</span><br></pre></td></tr></table></figure>

<p>此时你输入你项目的网址’http://用户名.github.io, 就可以访问自己的博客了。</p>
<p>hexo d 是上传到github上，如果你频繁的修改文件，或者只想暂时查看一下布局，可以选择：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean&amp;&amp;hexo g&amp;&amp;hexo s       </span><br></pre></td></tr></table></figure>

<p>通过<a href="http://localhost:4000/">http://localhost:4000</a> 在本地查看</p>
<p>当你自己一步步搭建完成后，你会发现博客具有以下特点：</p>
<ul>
<li>这是一个静态网页。</li>
<li>hexo将你的项目，变成静态网页，</li>
<li>github仓库托管网页，可以实现联网和资源的放置。<br>另外github托管的网页，不会被爬虫检索，即在百度上搜索不到</li>
</ul>
<h3 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h3><p><a href="https://blog.csdn.net/antma/article/details/86104068">配置nodejs教程</a></p>
<p>如果想要详细配置可以参考这篇文章：</p>
<p><a href="https://zhuanlan.zhihu.com/p/102592286">从零开始搭建个人博客（超详细）</a></p>
]]></content>
      <categories>
        <category>hexo</category>
        <category>搭建博客</category>
      </categories>
      <tags>
        <tag>博客搭建</tag>
        <tag>git</tag>
        <tag>nodejs</tag>
        <tag>hexo</tag>
      </tags>
  </entry>
</search>
